{"version":3,"file":"float-15cdf841.js","sources":["../../node_modules/@wix/sdk-context/build/index.mjs","../../node_modules/@wix/sdk-types/build/index.mjs","../../node_modules/@wix/sdk-runtime/build/context-v2.js","../../node_modules/@wix/sdk-runtime/build/context.js","../../node_modules/@wix/sdk-runtime/build/constants.js","../../node_modules/@wix/sdk-runtime/build/utils.js","../../node_modules/@wix/sdk-runtime/build/transform-error.js","../../node_modules/@wix/sdk-runtime/build/rest-modules.js","../../node_modules/@wix/sdk-runtime/build/rename-all-nested-keys.js","../../node_modules/@wix/sdk-runtime/build/transformations/timestamp.js","../../node_modules/@wix/sdk-runtime/build/transformations/transform-paths.js","../../node_modules/@wix/sdk-runtime/build/event-definition-modules.js","../../node_modules/@wix/sdk-runtime/build/transformations/float.js"],"sourcesContent":["// src/index.ts\nvar wixContext = {};\nexport {\n  wixContext\n};\n","// src/event-handlers-modules.ts\nfunction EventDefinition(type, isDomainEvent = false, transformations = (x) => x) {\n  return () => ({\n    __type: \"event-definition\",\n    type,\n    isDomainEvent,\n    transformations\n  });\n}\n\n// src/service-plugins.ts\nfunction ServicePluginDefinition(componentType, methods) {\n  return {\n    __type: \"service-plugin-definition\",\n    componentType,\n    methods\n  };\n}\nvar SERVICE_PLUGIN_ERROR_TYPE = \"wix_spi_error\";\n\n// src/common/sort.ts\nvar SORT_DIRECTIONS = {\n  ASC: \"ASC\",\n  DESC: \"DESC\"\n};\nvar SORT_CAPABILITIES = {\n  ...SORT_DIRECTIONS,\n  BOTH: \"BOTH\",\n  NONE: \"NONE\"\n};\nexport {\n  EventDefinition,\n  SERVICE_PLUGIN_ERROR_TYPE,\n  SORT_CAPABILITIES,\n  SORT_DIRECTIONS,\n  ServicePluginDefinition\n};\n","import { EventDefinition, ServicePluginDefinition, } from '@wix/sdk-types';\nimport { resolveContext } from './context.js';\nexport { EventDefinition, ServicePluginDefinition, };\nexport function contextualizeHostModuleV2(hostModule, props) {\n    return {\n        ...hostModule,\n        ...Object.fromEntries(props.map((prop) => [\n            prop,\n            (...args) => {\n                const context = resolveContext();\n                if (!context) {\n                    throw new Error('Wix context is not available. Make sure to initialize the Wix context before using SDK modules');\n                }\n                return context\n                    .initWixModules(hostModule)[prop].apply(undefined, args);\n            },\n        ])),\n    };\n}\nexport function contextualizeRESTModuleV2(restModule, elevated) {\n    return ((...args) => {\n        const context = resolveContext();\n        if (!context) {\n            // @ts-expect-error - if there is no context, we want to behave like the original module\n            return restModule.apply(undefined, args);\n        }\n        return (context\n            .initWixModules(restModule, elevated)\n            // @ts-expect-error - we know the args here are meant to be passed to the initalized module\n            .apply(undefined, args));\n    });\n}\nexport function contextualizeEventDefinitionModuleV2(eventDefinition) {\n    const contextualMethod = ((...args) => {\n        const context = resolveContext();\n        if (!context) {\n            // this line should throw, but this would be a breaking change for older SDK versions\n            // this is because in wixClient there's code that calls any function it detects and checks\n            // if it's an ambassador module (see isAmbassadorModule)\n            return () => {\n                // used by the CLI for webhook registration on build time\n                return {\n                    slug: eventDefinition.type,\n                };\n            };\n        }\n        return context.initWixModules(eventDefinition).apply(undefined, args);\n    });\n    contextualMethod.__type = eventDefinition.__type;\n    contextualMethod.type = eventDefinition.type;\n    contextualMethod.isDomainEvent = eventDefinition.isDomainEvent;\n    contextualMethod.transformations = eventDefinition.transformations;\n    return contextualMethod;\n}\nexport function contextualizeSerivcePluginModuleV2(servicePlugin) {\n    const contextualMethod = ((...args) => {\n        const context = resolveContext();\n        if (!context) {\n            // this line should throw, but this would be a breaking change for older SDK versions\n            // this is because in wixClient there's code that calls any function it detects and checks\n            // if it's an ambassador module (see isAmbassadorModule)\n            return () => { };\n        }\n        return context.initWixModules(servicePlugin).apply(undefined, args);\n    });\n    contextualMethod.__type = servicePlugin.__type;\n    contextualMethod.componentType = servicePlugin.componentType;\n    contextualMethod.methods = servicePlugin.methods;\n    return contextualMethod;\n}\n","import { wixContext } from '@wix/sdk-context';\nexport function resolveContext() {\n    const oldContext = typeof $wixContext !== 'undefined' && $wixContext.initWixModules\n        ? $wixContext.initWixModules\n        : typeof globalThis.__wix_context__ !== 'undefined' &&\n            globalThis.__wix_context__.initWixModules\n            ? globalThis.__wix_context__.initWixModules\n            : undefined;\n    if (oldContext) {\n        return {\n            // @ts-expect-error\n            initWixModules(modules, elevated) {\n                return runWithoutContext(() => oldContext(modules, elevated));\n            },\n            fetchWithAuth() {\n                throw new Error('fetchWithAuth is not available in this context');\n            },\n            graphql() {\n                throw new Error('graphql is not available in this context');\n            },\n        };\n    }\n    const contextualClient = typeof $wixContext !== 'undefined'\n        ? $wixContext.client\n        : typeof wixContext.client !== 'undefined'\n            ? wixContext.client\n            : typeof globalThis.__wix_context__ !== 'undefined'\n                ? globalThis.__wix_context__.client\n                : undefined;\n    const elevatedClient = typeof $wixContext !== 'undefined'\n        ? $wixContext.elevatedClient\n        : typeof wixContext.elevatedClient !== 'undefined'\n            ? wixContext.elevatedClient\n            : typeof globalThis.__wix_context__ !== 'undefined'\n                ? globalThis.__wix_context__.elevatedClient\n                : undefined;\n    if (!contextualClient && !elevatedClient) {\n        return;\n    }\n    return {\n        initWixModules(wixModules, elevated) {\n            if (elevated) {\n                if (!elevatedClient) {\n                    throw new Error('An elevated client is required to use elevated modules. Make sure to initialize the Wix context with an elevated client before using elevated SDK modules');\n                }\n                return runWithoutContext(() => elevatedClient.use(wixModules));\n            }\n            if (!contextualClient) {\n                throw new Error('Wix context is not available. Make sure to initialize the Wix context before using SDK modules');\n            }\n            return runWithoutContext(() => contextualClient.use(wixModules));\n        },\n        fetchWithAuth: (urlOrRequest, requestInit) => {\n            if (!contextualClient) {\n                throw new Error('Wix context is not available. Make sure to initialize the Wix context before using SDK modules');\n            }\n            return contextualClient.fetchWithAuth(urlOrRequest, requestInit);\n        },\n        getAuth() {\n            if (!contextualClient) {\n                throw new Error('Wix context is not available. Make sure to initialize the Wix context before using SDK modules');\n            }\n            return contextualClient.auth;\n        },\n        async graphql(query, variables, opts) {\n            if (!contextualClient) {\n                throw new Error('Wix context is not available. Make sure to initialize the Wix context before using SDK modules');\n            }\n            return contextualClient.graphql(query, variables, opts);\n        },\n    };\n}\nexport function contextualizeHostModule(hostModule, prop) {\n    return (...args) => {\n        const context = resolveContext();\n        if (!context) {\n            throw new Error('Wix context is not available. Make sure to initialize the Wix context before using SDK modules');\n        }\n        return context.initWixModules(hostModule)[prop].apply(undefined, args);\n    };\n}\nexport function getContextualAuth() {\n    const context = resolveContext();\n    if (!context) {\n        throw new Error('Wix context is not available. Make sure to initialize the Wix context before using SDK modules');\n    }\n    return context.getAuth();\n}\nexport function contextualizeRESTModule(restModule, expectedArgsLength) {\n    return ((...args) => {\n        const context = resolveContext();\n        if (!context) {\n            throw new Error('Wix context is not available. Make sure to initialize the Wix context before using SDK modules');\n        }\n        return context\n            .initWixModules(restModule, args[expectedArgsLength]?.suppressAuth ? true : false)\n            .apply(undefined, args);\n    });\n}\nexport function contextualizeEventDefinitionModule(eventDefinition) {\n    return ((...args) => {\n        const context = resolveContext();\n        if (!context) {\n            throw new Error('Wix context is not available. Make sure to initialize the Wix context before using SDK modules');\n        }\n        return context.initWixModules(eventDefinition).apply(undefined, args);\n    });\n}\nexport function contextualizeSerivcePluginModule(servicePlugin) {\n    return ((...args) => {\n        const context = resolveContext();\n        if (!context) {\n            throw new Error('Wix context is not available. Make sure to initialize the Wix context before using SDK modules');\n        }\n        return context.initWixModules(servicePlugin).apply(undefined, args);\n    });\n}\nexport * from './context-v2.js';\nexport function runWithoutContext(fn) {\n    const globalContext = globalThis.__wix_context__;\n    const moduleContext = {\n        client: wixContext.client,\n        elevatedClient: wixContext.elevatedClient,\n    };\n    let closureContext;\n    globalThis.__wix_context__ = undefined;\n    wixContext.client = undefined;\n    wixContext.elevatedClient = undefined;\n    if (typeof $wixContext !== 'undefined') {\n        closureContext = {\n            client: $wixContext?.client,\n            elevatedClient: $wixContext?.elevatedClient,\n        };\n        delete $wixContext.client;\n        delete $wixContext.elevatedClient;\n    }\n    try {\n        return fn();\n    }\n    finally {\n        globalThis.__wix_context__ = globalContext;\n        wixContext.client = moduleContext.client;\n        wixContext.elevatedClient = moduleContext.elevatedClient;\n        if (typeof $wixContext !== 'undefined') {\n            $wixContext.client = closureContext.client;\n            $wixContext.elevatedClient = closureContext.elevatedClient;\n        }\n    }\n}\n","export const WIX_PROTOCOL = 'wix:';\nexport const SDKRequestToRESTRequestRenameMap = {\n    _id: 'id',\n    _createdDate: 'createdDate',\n    _updatedDate: 'updatedDate',\n};\nexport const RESTResponseToSDKResponseRenameMap = {\n    id: '_id',\n    createdDate: '_createdDate',\n    updatedDate: '_updatedDate',\n};\nexport const ITEMS_RESULT_PROPERTY_NAME = 'items';\nexport const PAGING_METADATA_RESULT_PROPERTY_NAME = 'pagingMetadata';\nexport const DEFAULT_LIMIT = 50;\n","import { WIX_PROTOCOL } from './constants.js';\nexport function alignIfLegacy(url, type) {\n    const { protocol } = new URL(url);\n    return protocol === `${type}:` ? `${WIX_PROTOCOL}${url}` : url;\n}\nexport function removeUndefinedKeys(obj) {\n    return Object.fromEntries(Object.entries(obj).filter(([, value]) => value !== undefined));\n}\nexport function constantCase(input) {\n    return split(input)\n        .map((part) => part.toLocaleUpperCase())\n        .join('_');\n}\nconst SPLIT_LOWER_UPPER_RE = /([\\p{Ll}\\d])(\\p{Lu})/gu;\nconst SPLIT_UPPER_UPPER_RE = /(\\p{Lu})([\\p{Lu}][\\p{Ll}])/gu;\nconst SPLIT_REPLACE_VALUE = '$1\\0$2';\nconst DEFAULT_STRIP_REGEXP = /[^\\p{L}\\d]+/giu;\nexport function split(value) {\n    let result = value.trim();\n    result = result\n        .replace(SPLIT_LOWER_UPPER_RE, SPLIT_REPLACE_VALUE)\n        .replace(SPLIT_UPPER_UPPER_RE, SPLIT_REPLACE_VALUE);\n    result = result.replace(DEFAULT_STRIP_REGEXP, '\\0');\n    let start = 0;\n    let end = result.length;\n    // Trim the delimiter from around the output string.\n    while (result.charAt(start) === '\\0') {\n        start++;\n    }\n    if (start === end) {\n        return [];\n    }\n    while (result.charAt(end - 1) === '\\0') {\n        end--;\n    }\n    return result.slice(start, end).split(/\\0/g);\n}\n","import { constantCase } from './utils.js';\nconst isValidationError = (httpClientError) => 'validationError' in (httpClientError.response?.data?.details ?? {});\nconst isApplicationError = (httpClientError) => 'applicationError' in\n    (httpClientError.response?.data?.details ?? {});\nconst isClientError = (httpClientError) => (httpClientError.response?.status ?? -1) >= 400 &&\n    (httpClientError.response?.status ?? -1) < 500;\nexport function transformError(httpClientError, pathsToArguments = {\n    explicitPathsToArguments: {},\n    spreadPathsToArguments: {},\n    singleArgumentUnchanged: false,\n}, argumentNames = []) {\n    if (typeof httpClientError !== 'object' || httpClientError === null) {\n        throw httpClientError;\n    }\n    if (isValidationError(httpClientError)) {\n        return buildValidationError(httpClientError, pathsToArguments, argumentNames);\n    }\n    if (isApplicationError(httpClientError)) {\n        return buildApplicationError(httpClientError);\n    }\n    if (isClientError(httpClientError)) {\n        const status = httpClientError.response?.status;\n        const statusText = httpClientError.response?.statusText ?? 'UNKNOWN';\n        const message = httpClientError.response?.data?.message ?? statusText;\n        const details = {\n            applicationError: {\n                description: statusText,\n                code: constantCase(statusText),\n                data: {},\n            },\n            requestId: httpClientError.requestId,\n        };\n        return wrapError(httpClientError, {\n            message: JSON.stringify({\n                message,\n                details,\n            }, null, 2),\n            extraProperties: {\n                details,\n                status,\n            },\n        });\n    }\n    return buildSystemError(httpClientError);\n}\nconst buildValidationError = (httpClientError, pathsToArguments, argumentNames) => {\n    const validationErrorResponse = httpClientError.response\n        ?.data;\n    const requestId = httpClientError.requestId;\n    const { fieldViolations } = validationErrorResponse.details.validationError;\n    const transformedFieldViolations = violationsWithRenamedFields(pathsToArguments, fieldViolations, argumentNames)?.sort((a, b) => (a.field < b.field ? -1 : 1));\n    const message = `INVALID_ARGUMENT: ${transformedFieldViolations\n        ?.map(({ field, description }) => `\"${field}\" ${description}`)\n        ?.join(', ')}`;\n    const details = {\n        validationError: { fieldViolations: transformedFieldViolations },\n        requestId,\n    };\n    return wrapError(httpClientError, {\n        message: JSON.stringify({ message, details }, null, 2),\n        extraProperties: {\n            details,\n            status: httpClientError.response?.status,\n            requestId,\n        },\n    });\n};\nconst wrapError = (baseError, { message, extraProperties, }) => {\n    return Object.assign(baseError, {\n        ...extraProperties,\n        message,\n    });\n};\nconst buildApplicationError = (httpClientError) => {\n    const status = httpClientError.response?.status;\n    const statusText = httpClientError.response?.statusText ?? 'UNKNOWN';\n    const message = httpClientError.response?.data?.message ?? statusText;\n    const description = httpClientError.response?.data?.details?.applicationError?.description ??\n        statusText;\n    const code = httpClientError.response?.data?.details?.applicationError?.code ??\n        constantCase(statusText);\n    const data = httpClientError.response?.data?.details?.applicationError?.data ?? {};\n    const combinedMessage = message === description ? message : `${message}: ${description}`;\n    const details = {\n        applicationError: {\n            description,\n            code,\n            data,\n        },\n        requestId: httpClientError.requestId,\n    };\n    return wrapError(httpClientError, {\n        message: JSON.stringify({ message: combinedMessage, details }, null, 2),\n        extraProperties: {\n            details,\n            status,\n            requestId: httpClientError.requestId,\n        },\n    });\n};\nconst buildSystemError = (httpClientError) => {\n    const message = httpClientError.requestId\n        ? `System error occurred, request-id: ${httpClientError.requestId}`\n        : `System error occurred: ${JSON.stringify(httpClientError)}`;\n    return wrapError(httpClientError, {\n        message,\n        extraProperties: {\n            requestId: httpClientError.requestId,\n            status: httpClientError.response?.status,\n            code: constantCase(httpClientError.response?.statusText ?? 'UNKNOWN'),\n            ...(!httpClientError.response && {\n                runtimeError: httpClientError,\n            }),\n        },\n    });\n};\nconst violationsWithRenamedFields = ({ spreadPathsToArguments, explicitPathsToArguments, singleArgumentUnchanged, }, fieldViolations, argumentNames) => {\n    const allPathsToArguments = {\n        ...spreadPathsToArguments,\n        ...explicitPathsToArguments,\n    };\n    const allPathsToArgumentsKeys = Object.keys(allPathsToArguments);\n    return fieldViolations\n        ?.filter((fieldViolation) => {\n        // In some cases, the violations error will include both some.nested and some.nested.path,\n        // so we'll pick the more specific one if it's covered by the paths in the transformation.\n        const containedInAMoreSpecificViolationField = fieldViolations.some((anotherViolation) => anotherViolation.field.length > fieldViolation.field.length &&\n            anotherViolation.field.startsWith(fieldViolation.field) &&\n            allPathsToArgumentsKeys.includes(anotherViolation.field));\n        return !containedInAMoreSpecificViolationField;\n    })\n        .map((fieldViolation) => {\n        // This means we've got some.nested.field in the violation,\n        // matched against { some: { nested: { field: $[0].a.b.c } } } in the transformation.\n        // some.nested.field is replaced entirely with $[0].a.b.c, with $[0] replaced with the name of argument 0\n        const exactMatchArgumentExpression = explicitPathsToArguments[fieldViolation.field];\n        if (exactMatchArgumentExpression) {\n            return {\n                ...fieldViolation,\n                field: withRenamedArgument(exactMatchArgumentExpression, argumentNames),\n            };\n        }\n        const longestPartialPathMatch = allPathsToArgumentsKeys\n            ?.sort((a, b) => b.length - a.length)\n            ?.find((path) => fieldViolation.field.startsWith(path));\n        if (longestPartialPathMatch) {\n            // This means we've got some.nested.field in the violation,\n            // matched against { some: { nested: { *: $[0].a.b.c } } } in the transformation.\n            // Only the prefix some.nested is replaced with $[0].a.b.c, with $[0] replaced with the name of argument 0\n            // This can also happen in the case where the #wrap function is used.\n            const partialMatchArgumentExpression = allPathsToArguments[longestPartialPathMatch];\n            if (partialMatchArgumentExpression) {\n                return {\n                    ...fieldViolation,\n                    field: fieldViolation.field.replace(longestPartialPathMatch, withRenamedArgument(partialMatchArgumentExpression, argumentNames)),\n                };\n            }\n        }\n        if (singleArgumentUnchanged) {\n            return {\n                ...fieldViolation,\n                field: `${argumentNames[0]}.${fieldViolation.field}`,\n            };\n        }\n        return fieldViolation;\n    });\n};\nconst withRenamedArgument = (fieldValue, argumentNames) => {\n    const argIndex = getArgumentIndex(fieldValue);\n    if (argIndex !== null && typeof argIndex !== 'undefined') {\n        return fieldValue.replace(`$[${argIndex}]`, argumentNames[argIndex]);\n    }\n    return fieldValue;\n};\nconst getArgumentIndex = (s) => {\n    const match = s.match(/\\$\\[(?<argIndex>\\d+)\\]/);\n    return match && match.groups && Number(match.groups.argIndex);\n};\n","import { contextualizeRESTModuleV2 } from './context-v2.js';\nexport { RESTResponseToSDKResponseRenameMap } from './constants.js';\nexport function createRESTModule(descriptor, elevated = false) {\n    return contextualizeRESTModuleV2(descriptor, elevated);\n}\nexport function toURLSearchParams(params, isComplexRequest) {\n    const flatten = flattenParams(params);\n    // payloads with deep arrays or complex arrays are not serializable as URLSearchParams\n    const isPayloadNonSerializableAsUrlSearchParams = Object.entries(flatten).some(([key, value]) => key.includes('.') ||\n        (Array.isArray(value) && value.some((v) => typeof v === 'object')));\n    const shouldSerializeToRParam = isComplexRequest && isPayloadNonSerializableAsUrlSearchParams;\n    if (shouldSerializeToRParam) {\n        return new URLSearchParams({ '.r': base64Encode(JSON.stringify(params)) });\n    }\n    else {\n        return Object.entries(flatten).reduce((urlSearchParams, [key, value]) => {\n            // inorder to make `foo: [1,2]` turn into `foo=1&foo=2` and not `foo[]=1&foo[]=2`\n            const keyParams = Array.isArray(value) ? value : [value];\n            keyParams.forEach((param) => {\n                if (param === undefined ||\n                    param === null ||\n                    (Array.isArray(value) && typeof param === 'object')) {\n                    return;\n                }\n                urlSearchParams.append(key, param);\n            });\n            return urlSearchParams;\n        }, new URLSearchParams());\n    }\n}\nexport function resolveUrl(opts) {\n    const domain = resolveDomain(opts.host);\n    const mappings = resolveMappingsByDomain(domain, opts.domainToMappings);\n    const path = injectDataIntoProtoPath(opts.protoPath, opts.data || {});\n    return resolvePathFromMappings(path, mappings);\n}\nfunction flattenParams(data, path = '') {\n    const params = {};\n    Object.entries(data).forEach(([key, value]) => {\n        const isObject = value !== null && typeof value === 'object' && !Array.isArray(value);\n        const fieldPath = resolvePath(path, key);\n        if (isObject) {\n            const serializedObject = flattenParams(value, fieldPath);\n            Object.assign(params, serializedObject);\n        }\n        else {\n            params[fieldPath] = value;\n        }\n    });\n    return params;\n}\nfunction resolvePath(path, key) {\n    return `${path}${path ? '.' : ''}${key}`;\n}\nconst base64Encode = (value) => {\n    const base64 = typeof btoa !== 'undefined'\n        ? btoa(value)\n        : Buffer.from(value, 'utf-8').toString('base64');\n    return base64.replace(/=/g, '').replace(/\\+/g, '-').replace(/\\//g, '_');\n};\nconst DOMAINS = ['wix.com', 'editorx.com'];\nconst USER_DOMAIN = '_';\nconst REGEX_CAPTURE_DOMAINS = new RegExp(`\\\\.(${DOMAINS.join('|')})$`);\nconst WIX_API_DOMAINS = ['42.wixprod.net', 'uw2-edt-1.wixprod.net'];\nconst DEV_WIX_CODE_DOMAIN = 'dev.wix-code.com';\nconst REGEX_CAPTURE_PROTO_FIELD = /{(.*)}/;\nconst REGEX_CAPTURE_API_DOMAINS = new RegExp(`\\\\.(${WIX_API_DOMAINS.join('|')})$`);\nconst REGEX_CAPTURE_DEV_WIX_CODE_DOMAIN = new RegExp(`.*\\\\.${DEV_WIX_CODE_DOMAIN}$`);\nfunction resolveDomain(host) {\n    const resolvedHost = fixHostExceptions(host);\n    return resolvedHost\n        .replace(REGEX_CAPTURE_DOMAINS, '._base_domain_')\n        .replace(REGEX_CAPTURE_API_DOMAINS, '._api_base_domain_')\n        .replace(REGEX_CAPTURE_DEV_WIX_CODE_DOMAIN, '*.dev.wix-code.com');\n}\n// hosts which standard string replacing doesn't apply to them, will be fixed here.\nfunction fixHostExceptions(host) {\n    // https://system-kb.wixanswers.com/kb/en/article/editorx-domains-matching-to-wixcom\n    return host.replace('create.editorx.com', 'editor.editorx.com');\n}\nfunction resolveMappingsByDomain(domain, domainToMappings) {\n    const mappings = domainToMappings[domain] || domainToMappings[USER_DOMAIN];\n    if (mappings) {\n        return mappings;\n    }\n    const rootDomainMappings = resolveRootDomain(domain, domainToMappings);\n    if (!rootDomainMappings) {\n        if (isBaseDomain(domain)) {\n            // fallback <lang>.wix.com sub domains to www.wix.com\n            // since all of the languages subdomain are not mapped automatically in FP and we want to support those kind of calls\n            // for example: fr.wix.com\n            return domainToMappings[wwwBaseDomain];\n        }\n    }\n    return rootDomainMappings ?? [];\n}\nfunction resolveRootDomain(domain, domainToMappings) {\n    return Object.entries(domainToMappings).find(([entryDomain]) => {\n        const [, ...rooDomainSegments] = domain.split('.');\n        return rooDomainSegments.join('.') === entryDomain;\n    })?.[1];\n}\nfunction isBaseDomain(domain) {\n    return !!domain.match(/\\._base_domain_$/);\n}\nconst wwwBaseDomain = 'www._base_domain_';\nfunction injectDataIntoProtoPath(protoPath, data) {\n    return protoPath\n        .split('/')\n        .map((path) => maybeProtoPathToData(path, data))\n        .join('/');\n}\nfunction maybeProtoPathToData(protoPath, data) {\n    const protoRegExpMatch = protoPath.match(REGEX_CAPTURE_PROTO_FIELD) || [];\n    const field = protoRegExpMatch[1];\n    if (field) {\n        const suffix = protoPath.replace(protoRegExpMatch[0], '');\n        return findByPath(data, field, protoPath, suffix);\n    }\n    return protoPath;\n}\nfunction findByPath(obj, path, defaultValue, suffix) {\n    let result = obj;\n    for (const field of path.split('.')) {\n        if (!result) {\n            return defaultValue;\n        }\n        result = result[field];\n    }\n    return `${result}${suffix}`;\n}\nfunction resolvePathFromMappings(protoPath, mappings) {\n    const mapping = mappings?.find((m) => protoPath.startsWith(m.destPath));\n    if (!mapping) {\n        // todo: should we return the path? if no - what should we do in case of testings?\n        return protoPath;\n    }\n    return mapping.srcPath + protoPath.slice(mapping.destPath.length);\n}\n","import { RESTResponseToSDKResponseRenameMap, SDKRequestToRESTRequestRenameMap, } from './constants.js';\n/**\n * Recursively rename nested keys provided in `renameMap` in the given object.\n * Providing a list of paths to ignore will prevent renaming of keys in nested objects.\n *\n * Paths are provided in the format of 'path.to.nested.field'\n * @param payload The object to rename keys for\n * @param renameMap A map of keys to rename, where the key is the original key and the value is the new key\n * @param ignorePaths Paths of nested fields to ignore while traversing the object\n * @returns The object with renamed keys\n */\nexport function renameAllNestedKeys(payload, renameMap, ignorePaths) {\n    const isIgnored = (path) => ignorePaths.includes(path);\n    const traverse = (obj, path) => {\n        if (Array.isArray(obj)) {\n            obj.forEach((item) => {\n                traverse(item, path);\n            });\n        }\n        else if (typeof obj === 'object' && obj !== null) {\n            const objAsRecord = obj;\n            Object.keys(objAsRecord).forEach((key) => {\n                const newPath = path === '' ? key : `${path}.${key}`;\n                if (isIgnored(newPath)) {\n                    return;\n                }\n                const transformedKey = renameKey(key, renameMap);\n                if (transformedKey !== key && !(transformedKey in objAsRecord)) {\n                    objAsRecord[transformedKey] = objAsRecord[key];\n                    // eslint-disable-next-line @typescript-eslint/no-dynamic-delete\n                    delete objAsRecord[key];\n                }\n                traverse(objAsRecord[transformedKey], newPath);\n            });\n        }\n    };\n    traverse(payload, '');\n    return payload;\n}\nfunction renameKey(key, renameMap) {\n    let transformedKey;\n    if (key.includes('.')) {\n        const parts = key.split('.');\n        const transformedParts = parts.map((part) => renameMap[part] ?? part);\n        transformedKey = transformedParts.join('.');\n    }\n    else {\n        transformedKey = renameMap[key] ?? key;\n    }\n    return transformedKey;\n}\nexport function renameKeysFromSDKRequestToRESTRequest(payload, ignorePaths = []) {\n    return renameAllNestedKeys(payload, SDKRequestToRESTRequestRenameMap, ignorePaths);\n}\nexport function renameKeysFromRESTResponseToSDKResponse(payload, ignorePaths = []) {\n    return renameAllNestedKeys(payload, RESTResponseToSDKResponseRenameMap, ignorePaths);\n}\n","export function transformSDKTimestampToRESTTimestamp(val) {\n    return val?.toISOString();\n}\nexport function transformRESTTimestampToSDKTimestamp(val) {\n    return val ? new Date(val) : undefined;\n}\n","function transformPath(obj, { path, isRepeated, isMap, }, transformFn) {\n    const pathParts = path.split('.');\n    if (pathParts.length === 1 && path in obj) {\n        obj[path] = isRepeated\n            ? obj[path].map(transformFn)\n            : isMap\n                ? Object.fromEntries(Object.entries(obj[path]).map(([key, value]) => [key, transformFn(value)]))\n                : transformFn(obj[path]);\n        return obj;\n    }\n    const [first, ...rest] = pathParts;\n    if (first.endsWith('{}')) {\n        const cleanPath = first.slice(0, -2);\n        obj[cleanPath] = Object.fromEntries(Object.entries(obj[cleanPath]).map(([key, value]) => [\n            key,\n            transformPath(value, { path: rest.join('.'), isRepeated, isMap }, transformFn),\n        ]));\n    }\n    else if (Array.isArray(obj[first])) {\n        obj[first] = obj[first].map((item) => transformPath(item, { path: rest.join('.'), isRepeated, isMap }, transformFn));\n    }\n    else if (first in obj &&\n        typeof obj[first] === 'object' &&\n        obj[first] !== null) {\n        obj[first] = transformPath(obj[first], { path: rest.join('.'), isRepeated, isMap }, transformFn);\n    }\n    else if (first === '*') {\n        Object.keys(obj).reduce((acc, curr) => {\n            acc[curr] = transformPath(obj[curr], { path: rest.join('.'), isRepeated, isMap }, transformFn);\n            return acc;\n        }, obj);\n    }\n    return obj;\n}\nexport function transformPaths(obj, transformations) {\n    return transformations.reduce((acc, { paths, transformFn }) => paths.reduce((transformerAcc, path) => transformPath(transformerAcc, path, transformFn), acc), obj);\n}\n","import { contextualizeEventDefinitionModuleV2 } from './context-v2.js';\nexport function createEventModule(eventDefinition) {\n    return contextualizeEventDefinitionModuleV2(eventDefinition);\n}\n","export function transformSDKFloatToRESTFloat(val) {\n    return isFinite(val) ? val : val.toString();\n}\nexport function transformRESTFloatToSDKFloat(val) {\n    if (val === 'NaN') {\n        return NaN;\n    }\n    if (val === 'Infinity') {\n        return Infinity;\n    }\n    if (val === '-Infinity') {\n        return -Infinity;\n    }\n    return val;\n}\n"],"names":["wixContext","EventDefinition","type","isDomainEvent","transformations","x","ServicePluginDefinition","componentType","methods","SERVICE_PLUGIN_ERROR_TYPE","SORT_DIRECTIONS","SORT_CAPABILITIES","contextualizeRESTModuleV2","restModule","elevated","args","context","resolveContext","contextualizeEventDefinitionModuleV2","eventDefinition","contextualMethod","oldContext","modules","runWithoutContext","contextualClient","elevatedClient","wixModules","urlOrRequest","requestInit","query","variables","opts","fn","globalContext","moduleContext","closureContext","SDKRequestToRESTRequestRenameMap","RESTResponseToSDKResponseRenameMap","ITEMS_RESULT_PROPERTY_NAME","PAGING_METADATA_RESULT_PROPERTY_NAME","DEFAULT_LIMIT","removeUndefinedKeys","obj","value","constantCase","input","split","part","SPLIT_LOWER_UPPER_RE","SPLIT_UPPER_UPPER_RE","SPLIT_REPLACE_VALUE","DEFAULT_STRIP_REGEXP","result","start","end","isValidationError","httpClientError","_a","_b","isApplicationError","isClientError","transformError","pathsToArguments","argumentNames","_c","_d","buildValidationError","buildApplicationError","status","statusText","message","details","wrapError","buildSystemError","validationErrorResponse","requestId","fieldViolations","transformedFieldViolations","violationsWithRenamedFields","a","b","field","description","baseError","extraProperties","_e","_f","_g","_h","_i","_j","_k","_l","_m","_n","_o","_p","code","data","combinedMessage","spreadPathsToArguments","explicitPathsToArguments","singleArgumentUnchanged","allPathsToArguments","allPathsToArgumentsKeys","fieldViolation","anotherViolation","exactMatchArgumentExpression","withRenamedArgument","longestPartialPathMatch","path","partialMatchArgumentExpression","fieldValue","argIndex","getArgumentIndex","s","match","createRESTModule","descriptor","toURLSearchParams","params","isComplexRequest","flatten","flattenParams","isPayloadNonSerializableAsUrlSearchParams","key","v","base64Encode","urlSearchParams","param","resolveUrl","domain","resolveDomain","mappings","resolveMappingsByDomain","injectDataIntoProtoPath","resolvePathFromMappings","isObject","fieldPath","resolvePath","serializedObject","DOMAINS","USER_DOMAIN","REGEX_CAPTURE_DOMAINS","WIX_API_DOMAINS","DEV_WIX_CODE_DOMAIN","REGEX_CAPTURE_PROTO_FIELD","REGEX_CAPTURE_API_DOMAINS","REGEX_CAPTURE_DEV_WIX_CODE_DOMAIN","host","fixHostExceptions","domainToMappings","rootDomainMappings","resolveRootDomain","isBaseDomain","wwwBaseDomain","entryDomain","rooDomainSegments","protoPath","maybeProtoPathToData","protoRegExpMatch","suffix","findByPath","defaultValue","mapping","m","renameAllNestedKeys","payload","renameMap","ignorePaths","isIgnored","traverse","item","objAsRecord","newPath","transformedKey","renameKey","renameKeysFromSDKRequestToRESTRequest","renameKeysFromRESTResponseToSDKResponse","transformSDKTimestampToRESTTimestamp","val","transformRESTTimestampToSDKTimestamp","transformPath","isRepeated","isMap","transformFn","pathParts","first","rest","cleanPath","acc","curr","transformPaths","paths","transformerAcc","createEventModule","transformSDKFloatToRESTFloat","transformRESTFloatToSDKFloat"],"mappings":"AACG,IAACA,EAAa,CAAA,ECAjB,SAASC,GAAgBC,EAAMC,EAAgB,GAAOC,EAAmBC,GAAMA,EAAG,CAChF,MAAO,KAAO,CACZ,OAAQ,mBACR,KAAAH,EACA,cAAAC,EACA,gBAAAC,CACJ,EACA,CAGA,SAASE,GAAwBC,EAAeC,EAAS,CACvD,MAAO,CACL,OAAQ,4BACR,cAAAD,EACA,QAAAC,CACJ,CACA,CACG,IAACC,GAA4B,gBAG5BC,EAAkB,CACpB,IAAK,MACL,KAAM,MACR,EACIC,GAAoB,CACtB,GAAGD,EACH,KAAM,OACN,KAAM,MACR,ECVO,SAASE,EAA0BC,EAAYC,EAAU,CAC5D,MAAQ,IAAIC,IAAS,CACjB,MAAMC,EAAUC,IAChB,OAAKD,EAIGA,EACH,eAAeH,EAAYC,CAAQ,EAEnC,MAAM,OAAWC,CAAI,EALfF,EAAW,MAAM,OAAWE,CAAI,CAMnD,CACA,CACO,SAASG,EAAqCC,EAAiB,CAClE,MAAMC,EAAoB,IAAIL,IAAS,CACnC,MAAMC,EAAUC,IAChB,OAAKD,EAWEA,EAAQ,eAAeG,CAAe,EAAE,MAAM,OAAWJ,CAAI,EAPzD,KAEI,CACH,KAAMI,EAAgB,IAC1C,EAIA,EACI,OAAAC,EAAiB,OAASD,EAAgB,OAC1CC,EAAiB,KAAOD,EAAgB,KACxCC,EAAiB,cAAgBD,EAAgB,cACjDC,EAAiB,gBAAkBD,EAAgB,gBAC5CC,CACX,CCpDO,SAASH,GAAiB,CAC7B,MAAMI,EAAa,OAAO,YAAgB,KAAe,YAAY,eAC/D,YAAY,eACZ,OAAO,WAAW,gBAAoB,KACpC,WAAW,gBAAgB,eACzB,WAAW,gBAAgB,eAC3B,OACV,GAAIA,EACA,MAAO,CAEH,eAAeC,EAASR,EAAU,CAC9B,OAAOS,EAAkB,IAAMF,EAAWC,EAASR,CAAQ,CAAC,CAC/D,EACD,eAAgB,CACZ,MAAM,IAAI,MAAM,gDAAgD,CACnE,EACD,SAAU,CACN,MAAM,IAAI,MAAM,0CAA0C,CAC7D,CACb,EAEI,MAAMU,EAAmB,OAAO,YAAgB,IAC1C,YAAY,OACZ,OAAOxB,EAAW,OAAW,IACzBA,EAAW,OACX,OAAO,WAAW,gBAAoB,IAClC,WAAW,gBAAgB,OAC3B,OACRyB,EAAiB,OAAO,YAAgB,IACxC,YAAY,eACZ,OAAOzB,EAAW,eAAmB,IACjCA,EAAW,eACX,OAAO,WAAW,gBAAoB,IAClC,WAAW,gBAAgB,eAC3B,OACd,GAAI,GAACwB,GAAoB,CAACC,GAG1B,MAAO,CACH,eAAeC,EAAYZ,EAAU,CACjC,GAAIA,EAAU,CACV,GAAI,CAACW,EACD,MAAM,IAAI,MAAM,2JAA2J,EAE/K,OAAOF,EAAkB,IAAME,EAAe,IAAIC,CAAU,CAAC,CAChE,CACD,GAAI,CAACF,EACD,MAAM,IAAI,MAAM,gGAAgG,EAEpH,OAAOD,EAAkB,IAAMC,EAAiB,IAAIE,CAAU,CAAC,CAClE,EACD,cAAe,CAACC,EAAcC,IAAgB,CAC1C,GAAI,CAACJ,EACD,MAAM,IAAI,MAAM,gGAAgG,EAEpH,OAAOA,EAAiB,cAAcG,EAAcC,CAAW,CAClE,EACD,SAAU,CACN,GAAI,CAACJ,EACD,MAAM,IAAI,MAAM,gGAAgG,EAEpH,OAAOA,EAAiB,IAC3B,EACD,MAAM,QAAQK,EAAOC,EAAWC,EAAM,CAClC,GAAI,CAACP,EACD,MAAM,IAAI,MAAM,gGAAgG,EAEpH,OAAOA,EAAiB,QAAQK,EAAOC,EAAWC,CAAI,CACzD,CACT,CACA,CA+CO,SAASR,EAAkBS,EAAI,CAClC,MAAMC,EAAgB,WAAW,gBAC3BC,EAAgB,CAClB,OAAQlC,EAAW,OACnB,eAAgBA,EAAW,cACnC,EACI,IAAImC,EACJ,WAAW,gBAAkB,OAC7BnC,EAAW,OAAS,OACpBA,EAAW,eAAiB,OACxB,OAAO,YAAgB,MACvBmC,EAAiB,CACb,OAAQ,qCAAa,OACrB,eAAgB,qCAAa,cACzC,EACQ,OAAO,YAAY,OACnB,OAAO,YAAY,gBAEvB,GAAI,CACA,OAAOH,EAAE,CACZ,QACO,CACJ,WAAW,gBAAkBC,EAC7BjC,EAAW,OAASkC,EAAc,OAClClC,EAAW,eAAiBkC,EAAc,eACtC,OAAO,YAAgB,MACvB,YAAY,OAASC,EAAe,OACpC,YAAY,eAAiBA,EAAe,eAEnD,CACL,CCnJY,MAACC,EAAmC,CAC5C,IAAK,KACL,aAAc,cACd,aAAc,aAClB,EACaC,EAAqC,CAC9C,GAAI,MACJ,YAAa,eACb,YAAa,cACjB,EACaC,GAA6B,QAC7BC,GAAuC,iBACvCC,GAAgB,GCRtB,SAASC,GAAoBC,EAAK,CACrC,OAAO,OAAO,YAAY,OAAO,QAAQA,CAAG,EAAE,OAAO,CAAC,CAAG,CAAAC,CAAK,IAAMA,IAAU,MAAS,CAAC,CAC5F,CACO,SAASC,EAAaC,EAAO,CAChC,OAAOC,EAAMD,CAAK,EACb,IAAKE,GAASA,EAAK,kBAAiB,CAAE,EACtC,KAAK,GAAG,CACjB,CACA,MAAMC,EAAuB,yBACvBC,EAAuB,+BACvBC,EAAsB,SACtBC,EAAuB,iBACtB,SAASL,EAAMH,EAAO,CACzB,IAAIS,EAAST,EAAM,OACnBS,EAASA,EACJ,QAAQJ,EAAsBE,CAAmB,EACjD,QAAQD,EAAsBC,CAAmB,EACtDE,EAASA,EAAO,QAAQD,EAAsB,IAAI,EAClD,IAAIE,EAAQ,EACRC,EAAMF,EAAO,OAEjB,KAAOA,EAAO,OAAOC,CAAK,IAAM,MAC5BA,IAEJ,GAAIA,IAAUC,EACV,MAAO,GAEX,KAAOF,EAAO,OAAOE,EAAM,CAAC,IAAM,MAC9BA,IAEJ,OAAOF,EAAO,MAAMC,EAAOC,CAAG,EAAE,MAAM,KAAK,CAC/C,CCnCA,MAAMC,EAAqBC,GAAe,CND1C,IAAAC,EAAAC,EMC+C,4BAAsBA,GAAAD,EAAAD,EAAgB,WAAhB,YAAAC,EAA0B,OAA1B,YAAAC,EAAgC,UAAW,CAAA,IAC1GC,EAAsBH,INF5B,IAAAC,EAAAC,EMEgD,6BAC3CA,GAAAD,EAAAD,EAAgB,WAAhB,YAAAC,EAA0B,OAA1B,YAAAC,EAAgC,UAAW,CAAE,IAC5CE,EAAiBJ,INJvB,IAAAC,EAAAC,EMI4C,SAAAD,EAAAD,EAAgB,WAAhB,YAAAC,EAA0B,SAAU,KAAO,QAClFC,EAAAF,EAAgB,WAAhB,YAAAE,EAA0B,SAAU,IAAM,KACxC,SAASG,GAAeL,EAAiBM,EAAmB,CAC/D,yBAA0B,CAAE,EAC5B,uBAAwB,CAAE,EAC1B,wBAAyB,EAC7B,EAAGC,EAAgB,CAAA,EAAI,CNVvB,IAAAN,EAAAC,EAAAM,EAAAC,EMWI,GAAI,OAAOT,GAAoB,UAAYA,IAAoB,KAC3D,MAAMA,EAEV,GAAID,EAAkBC,CAAe,EACjC,OAAOU,EAAqBV,EAAiBM,EAAkBC,CAAa,EAEhF,GAAIJ,EAAmBH,CAAe,EAClC,OAAOW,EAAsBX,CAAe,EAEhD,GAAII,EAAcJ,CAAe,EAAG,CAChC,MAAMY,GAASX,EAAAD,EAAgB,WAAhB,YAAAC,EAA0B,OACnCY,IAAaX,EAAAF,EAAgB,WAAhB,YAAAE,EAA0B,aAAc,UACrDY,IAAUL,GAAAD,EAAAR,EAAgB,WAAhB,YAAAQ,EAA0B,OAA1B,YAAAC,EAAgC,UAAWI,EACrDE,EAAU,CACZ,iBAAkB,CACd,YAAaF,EACb,KAAMzB,EAAayB,CAAU,EAC7B,KAAM,CAAE,CACX,EACD,UAAWb,EAAgB,SACvC,EACQ,OAAOgB,EAAUhB,EAAiB,CAC9B,QAAS,KAAK,UAAU,CACpB,QAAAc,EACA,QAAAC,CAChB,EAAe,KAAM,CAAC,EACV,gBAAiB,CACb,QAAAA,EACA,OAAAH,CACH,CACb,CAAS,CACJ,CACD,OAAOK,EAAiBjB,CAAe,CAC3C,CACA,MAAMU,EAAuB,CAACV,EAAiBM,EAAkBC,IAAkB,CN7CnF,IAAAN,EAAAC,EAAAM,EAAAC,EM8CI,MAAMS,GAA0BjB,EAAAD,EAAgB,WAAhB,YAAAC,EAC1B,KACAkB,EAAYnB,EAAgB,UAC5B,CAAE,gBAAAoB,CAAiB,EAAGF,EAAwB,QAAQ,gBACtDG,GAA6BnB,EAAAoB,EAA4BhB,EAAkBc,EAAiBb,CAAa,IAA5E,YAAAL,EAA+E,KAAK,CAACqB,EAAGC,IAAOD,EAAE,MAAQC,EAAE,MAAQ,GAAK,GACrJV,EAAU,sBAAqBN,EAAAa,GAAA,YAAAA,EAC/B,IAAI,CAAC,CAAE,MAAAI,EAAO,YAAAC,CAAa,IAAK,IAAID,CAAK,KAAKC,CAAW,MAD1B,YAAAlB,EAE/B,KAAK,KAAK,GACVO,EAAU,CACZ,gBAAiB,CAAE,gBAAiBM,CAA4B,EAChE,UAAAF,CACR,EACI,OAAOH,EAAUhB,EAAiB,CAC9B,QAAS,KAAK,UAAU,CAAE,QAAAc,EAAS,QAAAC,CAAS,EAAE,KAAM,CAAC,EACrD,gBAAiB,CACb,QAAAA,EACA,QAAQN,EAAAT,EAAgB,WAAhB,YAAAS,EAA0B,OAClC,UAAAU,CACH,CACT,CAAK,CACL,EACMH,EAAY,CAACW,EAAW,CAAE,QAAAb,EAAS,gBAAAc,CAAe,IAC7C,OAAO,OAAOD,EAAW,CAC5B,GAAGC,EACH,QAAAd,CACR,CAAK,EAECH,EAAyBX,GAAoB,CNzEnD,IAAAC,EAAAC,EAAAM,EAAAC,EAAAoB,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EM0EI,MAAM5B,GAASX,EAAAD,EAAgB,WAAhB,YAAAC,EAA0B,OACnCY,IAAaX,EAAAF,EAAgB,WAAhB,YAAAE,EAA0B,aAAc,UACrDY,IAAUL,GAAAD,EAAAR,EAAgB,WAAhB,YAAAQ,EAA0B,OAA1B,YAAAC,EAAgC,UAAWI,EACrDa,IAAcM,GAAAD,GAAAD,GAAAD,EAAA7B,EAAgB,WAAhB,YAAA6B,EAA0B,OAA1B,YAAAC,EAAgC,UAAhC,YAAAC,EAAyC,mBAAzC,YAAAC,EAA2D,cAC3EnB,EACE4B,IAAOL,GAAAD,GAAAD,GAAAD,EAAAjC,EAAgB,WAAhB,YAAAiC,EAA0B,OAA1B,YAAAC,EAAgC,UAAhC,YAAAC,EAAyC,mBAAzC,YAAAC,EAA2D,OACpEhD,EAAayB,CAAU,EACrB6B,IAAOF,GAAAD,GAAAD,GAAAD,EAAArC,EAAgB,WAAhB,YAAAqC,EAA0B,OAA1B,YAAAC,EAAgC,UAAhC,YAAAC,EAAyC,mBAAzC,YAAAC,EAA2D,OAAQ,GAC1EG,EAAkB7B,IAAYY,EAAcZ,EAAU,GAAGA,CAAO,KAAKY,CAAW,GAChFX,EAAU,CACZ,iBAAkB,CACd,YAAAW,EACA,KAAAe,EACA,KAAAC,CACH,EACD,UAAW1C,EAAgB,SACnC,EACI,OAAOgB,EAAUhB,EAAiB,CAC9B,QAAS,KAAK,UAAU,CAAE,QAAS2C,EAAiB,QAAA5B,CAAO,EAAI,KAAM,CAAC,EACtE,gBAAiB,CACb,QAAAA,EACA,OAAAH,EACA,UAAWZ,EAAgB,SAC9B,CACT,CAAK,CACL,EACMiB,EAAoBjB,GAAoB,CNpG9C,IAAAC,EAAAC,EMqGI,MAAMY,EAAUd,EAAgB,UAC1B,sCAAsCA,EAAgB,SAAS,GAC/D,0BAA0B,KAAK,UAAUA,CAAe,CAAC,GAC/D,OAAOgB,EAAUhB,EAAiB,CAC9B,QAAAc,EACA,gBAAiB,CACb,UAAWd,EAAgB,UAC3B,QAAQC,EAAAD,EAAgB,WAAhB,YAAAC,EAA0B,OAClC,KAAMb,IAAac,EAAAF,EAAgB,WAAhB,YAAAE,EAA0B,aAAc,SAAS,EACpE,GAAI,CAACF,EAAgB,UAAY,CAC7B,aAAcA,CAC9B,CACS,CACT,CAAK,CACL,EACMsB,EAA8B,CAAC,CAAE,uBAAAsB,EAAwB,yBAAAC,EAA0B,wBAAAC,CAA0B,EAAE1B,EAAiBb,IAAkB,CACpJ,MAAMwC,EAAsB,CACxB,GAAGH,EACH,GAAGC,CACX,EACUG,EAA0B,OAAO,KAAKD,CAAmB,EAC/D,OAAO3B,GAAA,YAAAA,EACD,OAAQ6B,GAMH,CAHwC7B,EAAgB,KAAM8B,GAAqBA,EAAiB,MAAM,OAASD,EAAe,MAAM,QAC3IC,EAAiB,MAAM,WAAWD,EAAe,KAAK,GACtDD,EAAwB,SAASE,EAAiB,KAAK,CAAC,GAG3D,IAAKD,GAAmB,CNnIjC,IAAAhD,EMuIQ,MAAMkD,EAA+BN,EAAyBI,EAAe,KAAK,EAClF,GAAIE,EACA,MAAO,CACH,GAAGF,EACH,MAAOG,EAAoBD,EAA8B5C,CAAa,CACtF,EAEQ,MAAM8C,GAA0BpD,EAAA+C,GAAA,YAAAA,EAC1B,KAAK,CAACzB,EAAGC,IAAMA,EAAE,OAASD,EAAE,UADF,YAAAtB,EAE1B,KAAMqD,GAASL,EAAe,MAAM,WAAWK,CAAI,GACzD,GAAID,EAAyB,CAKzB,MAAME,EAAiCR,EAAoBM,CAAuB,EAClF,GAAIE,EACA,MAAO,CACH,GAAGN,EACH,MAAOA,EAAe,MAAM,QAAQI,EAAyBD,EAAoBG,EAAgChD,CAAa,CAAC,CACnJ,CAES,CACD,OAAIuC,EACO,CACH,GAAGG,EACH,MAAO,GAAG1C,EAAc,CAAC,CAAC,IAAI0C,EAAe,KAAK,EAClE,EAEeA,CACf,EACA,EACMG,EAAsB,CAACI,EAAYjD,IAAkB,CACvD,MAAMkD,EAAWC,EAAiBF,CAAU,EAC5C,OAAIC,IAAa,MAAQ,OAAOA,EAAa,IAClCD,EAAW,QAAQ,KAAKC,CAAQ,IAAKlD,EAAckD,CAAQ,CAAC,EAEhED,CACX,EACME,EAAoBC,GAAM,CAC5B,MAAMC,EAAQD,EAAE,MAAM,wBAAwB,EAC9C,OAAOC,GAASA,EAAM,QAAU,OAAOA,EAAM,OAAO,QAAQ,CAChE,EC/KO,SAASC,GAAiBC,EAAYxG,EAAW,GAAO,CAC3D,OAAOF,EAA0B0G,EAAYxG,CAAQ,CACzD,CACO,SAASyG,GAAkBC,EAAQC,EAAkB,CACxD,MAAMC,EAAUC,EAAcH,CAAM,EAE9BI,EAA4C,OAAO,QAAQF,CAAO,EAAE,KAAK,CAAC,CAACG,EAAKlF,CAAK,IAAMkF,EAAI,SAAS,GAAG,GAC5G,MAAM,QAAQlF,CAAK,GAAKA,EAAM,KAAMmF,GAAM,OAAOA,GAAM,QAAQ,CAAE,EAEtE,OADgCL,GAAoBG,EAEzC,IAAI,gBAAgB,CAAE,KAAMG,EAAa,KAAK,UAAUP,CAAM,CAAC,CAAC,CAAE,EAGlE,OAAO,QAAQE,CAAO,EAAE,OAAO,CAACM,EAAiB,CAACH,EAAKlF,CAAK,MAE7C,MAAM,QAAQA,CAAK,EAAIA,EAAQ,CAACA,CAAK,GAC7C,QAASsF,GAAU,CAErBA,GAAU,MACT,MAAM,QAAQtF,CAAK,GAAK,OAAOsF,GAAU,UAG9CD,EAAgB,OAAOH,EAAKI,CAAK,CACjD,CAAa,EACMD,GACR,IAAI,eAAiB,CAEhC,CACO,SAASE,GAAWnG,EAAM,CAC7B,MAAMoG,EAASC,GAAcrG,EAAK,IAAI,EAChCsG,EAAWC,GAAwBH,EAAQpG,EAAK,gBAAgB,EAChE+E,EAAOyB,GAAwBxG,EAAK,UAAWA,EAAK,MAAQ,CAAA,CAAE,EACpE,OAAOyG,GAAwB1B,EAAMuB,CAAQ,CACjD,CACA,SAASV,EAAczB,EAAMY,EAAO,GAAI,CACpC,MAAMU,EAAS,CAAA,EACf,cAAO,QAAQtB,CAAI,EAAE,QAAQ,CAAC,CAAC2B,EAAKlF,CAAK,IAAM,CAC3C,MAAM8F,EAAW9F,IAAU,MAAQ,OAAOA,GAAU,UAAY,CAAC,MAAM,QAAQA,CAAK,EAC9E+F,EAAYC,EAAY7B,EAAMe,CAAG,EACvC,GAAIY,EAAU,CACV,MAAMG,EAAmBjB,EAAchF,EAAO+F,CAAS,EACvD,OAAO,OAAOlB,EAAQoB,CAAgB,CACzC,MAEGpB,EAAOkB,CAAS,EAAI/F,CAEhC,CAAK,EACM6E,CACX,CACA,SAASmB,EAAY7B,EAAMe,EAAK,CAC5B,MAAO,GAAGf,CAAI,GAAGA,EAAO,IAAM,EAAE,GAAGe,CAAG,EAC1C,CACA,MAAME,EAAgBpF,IACH,OAAO,KAAS,IACzB,KAAKA,CAAK,EACV,OAAO,KAAKA,EAAO,OAAO,EAAE,SAAS,QAAQ,GACrC,QAAQ,KAAM,EAAE,EAAE,QAAQ,MAAO,GAAG,EAAE,QAAQ,MAAO,GAAG,EAEpEkG,GAAU,CAAC,UAAW,aAAa,EACnCC,GAAc,IACdC,GAAwB,IAAI,OAAO,OAAOF,GAAQ,KAAK,GAAG,CAAC,IAAI,EAC/DG,GAAkB,CAAC,iBAAkB,uBAAuB,EAC5DC,GAAsB,mBACtBC,GAA4B,SAC5BC,GAA4B,IAAI,OAAO,OAAOH,GAAgB,KAAK,GAAG,CAAC,IAAI,EAC3EI,GAAoC,IAAI,OAAO,QAAQH,EAAmB,GAAG,EACnF,SAASb,GAAciB,EAAM,CAEzB,OADqBC,GAAkBD,CAAI,EAEtC,QAAQN,GAAuB,gBAAgB,EAC/C,QAAQI,GAA2B,oBAAoB,EACvD,QAAQC,GAAmC,oBAAoB,CACxE,CAEA,SAASE,GAAkBD,EAAM,CAE7B,OAAOA,EAAK,QAAQ,qBAAsB,oBAAoB,CAClE,CACA,SAASf,GAAwBH,EAAQoB,EAAkB,CACvD,MAAMlB,EAAWkB,EAAiBpB,CAAM,GAAKoB,EAAiBT,EAAW,EACzE,GAAIT,EACA,OAAOA,EAEX,MAAMmB,EAAqBC,GAAkBtB,EAAQoB,CAAgB,EACrE,MAAI,CAACC,GACGE,GAAavB,CAAM,EAIZoB,EAAiBI,EAAa,EAGtCH,GAAsB,CAAA,CACjC,CACA,SAASC,GAAkBtB,EAAQoB,EAAkB,CPhGrD,IAAA9F,EOiGI,OAAOA,EAAA,OAAO,QAAQ8F,CAAgB,EAAE,KAAK,CAAC,CAACK,CAAW,IAAM,CAC5D,KAAM,CAAA,CAAG,GAAGC,CAAiB,EAAI1B,EAAO,MAAM,GAAG,EACjD,OAAO0B,EAAkB,KAAK,GAAG,IAAMD,CAC/C,CAAK,IAHM,YAAAnG,EAGF,EACT,CACA,SAASiG,GAAavB,EAAQ,CAC1B,MAAO,CAAC,CAACA,EAAO,MAAM,kBAAkB,CAC5C,CACA,MAAMwB,GAAgB,oBACtB,SAASpB,GAAwBuB,EAAW5D,EAAM,CAC9C,OAAO4D,EACF,MAAM,GAAG,EACT,IAAKhD,GAASiD,GAAqBjD,EAAMZ,CAAI,CAAC,EAC9C,KAAK,GAAG,CACjB,CACA,SAAS6D,GAAqBD,EAAW5D,EAAM,CAC3C,MAAM8D,EAAmBF,EAAU,MAAMZ,EAAyB,GAAK,CAAA,EACjEjE,EAAQ+E,EAAiB,CAAC,EAChC,GAAI/E,EAAO,CACP,MAAMgF,EAASH,EAAU,QAAQE,EAAiB,CAAC,EAAG,EAAE,EACxD,OAAOE,GAAWhE,EAAMjB,EAAO6E,EAAWG,CAAM,CACnD,CACD,OAAOH,CACX,CACA,SAASI,GAAWxH,EAAKoE,EAAMqD,EAAcF,EAAQ,CACjD,IAAI7G,EAASV,EACb,UAAWuC,KAAS6B,EAAK,MAAM,GAAG,EAAG,CACjC,GAAI,CAAC1D,EACD,OAAO+G,EAEX/G,EAASA,EAAO6B,CAAK,CACxB,CACD,MAAO,GAAG7B,CAAM,GAAG6G,CAAM,EAC7B,CACA,SAASzB,GAAwBsB,EAAWzB,EAAU,CAClD,MAAM+B,EAAU/B,GAAA,YAAAA,EAAU,KAAMgC,GAAMP,EAAU,WAAWO,EAAE,QAAQ,GACrE,OAAKD,EAIEA,EAAQ,QAAUN,EAAU,MAAMM,EAAQ,SAAS,MAAM,EAFrDN,CAGf,CC/HO,SAASQ,EAAoBC,EAASC,EAAWC,EAAa,CACjE,MAAMC,EAAa5D,GAAS2D,EAAY,SAAS3D,CAAI,EAC/C6D,EAAW,CAACjI,EAAKoE,IAAS,CAC5B,GAAI,MAAM,QAAQpE,CAAG,EACjBA,EAAI,QAASkI,GAAS,CAClBD,EAASC,EAAM9D,CAAI,CACnC,CAAa,UAEI,OAAOpE,GAAQ,UAAYA,IAAQ,KAAM,CAC9C,MAAMmI,EAAcnI,EACpB,OAAO,KAAKmI,CAAW,EAAE,QAAShD,GAAQ,CACtC,MAAMiD,EAAUhE,IAAS,GAAKe,EAAM,GAAGf,CAAI,IAAIe,CAAG,GAClD,GAAI6C,EAAUI,CAAO,EACjB,OAEJ,MAAMC,EAAiBC,GAAUnD,EAAK2C,CAAS,EAC3CO,IAAmBlD,GAAO,EAAEkD,KAAkBF,KAC9CA,EAAYE,CAAc,EAAIF,EAAYhD,CAAG,EAE7C,OAAOgD,EAAYhD,CAAG,GAE1B8C,EAASE,EAAYE,CAAc,EAAGD,CAAO,CAC7D,CAAa,CACJ,CACT,EACI,OAAAH,EAASJ,EAAS,EAAE,EACbA,CACX,CACA,SAASS,GAAUnD,EAAK2C,EAAW,CAC/B,IAAIO,EACJ,OAAIlD,EAAI,SAAS,GAAG,EAGhBkD,EAFclD,EAAI,MAAM,GAAG,EACI,IAAK9E,GAASyH,EAAUzH,CAAI,GAAKA,CAAI,EAClC,KAAK,GAAG,EAG1CgI,EAAiBP,EAAU3C,CAAG,GAAKA,EAEhCkD,CACX,CACO,SAASE,GAAsCV,EAASE,EAAc,GAAI,CAC7E,OAAOH,EAAoBC,EAASnI,EAAkCqI,CAAW,CACrF,CACO,SAASS,GAAwCX,EAASE,EAAc,GAAI,CAC/E,OAAOH,EAAoBC,EAASlI,EAAoCoI,CAAW,CACvF,CCxDO,SAASU,GAAqCC,EAAK,CACtD,OAAOA,GAAA,YAAAA,EAAK,aAChB,CACO,SAASC,GAAqCD,EAAK,CACtD,OAAOA,EAAM,IAAI,KAAKA,CAAG,EAAI,MACjC,CCLA,SAASE,EAAc5I,EAAK,CAAE,KAAAoE,EAAM,WAAAyE,EAAY,MAAAC,CAAQ,EAAEC,EAAa,CACnE,MAAMC,EAAY5E,EAAK,MAAM,GAAG,EAChC,GAAI4E,EAAU,SAAW,GAAK5E,KAAQpE,EAClC,OAAAA,EAAIoE,CAAI,EAAIyE,EACN7I,EAAIoE,CAAI,EAAE,IAAI2E,CAAW,EACzBD,EACI,OAAO,YAAY,OAAO,QAAQ9I,EAAIoE,CAAI,CAAC,EAAE,IAAI,CAAC,CAACe,EAAKlF,CAAK,IAAM,CAACkF,EAAK4D,EAAY9I,CAAK,CAAC,CAAC,CAAC,EAC7F8I,EAAY/I,EAAIoE,CAAI,CAAC,EACxBpE,EAEX,KAAM,CAACiJ,EAAO,GAAGC,CAAI,EAAIF,EACzB,GAAIC,EAAM,SAAS,IAAI,EAAG,CACtB,MAAME,EAAYF,EAAM,MAAM,EAAG,EAAE,EACnCjJ,EAAImJ,CAAS,EAAI,OAAO,YAAY,OAAO,QAAQnJ,EAAImJ,CAAS,CAAC,EAAE,IAAI,CAAC,CAAChE,EAAKlF,CAAK,IAAM,CACrFkF,EACAyD,EAAc3I,EAAO,CAAE,KAAMiJ,EAAK,KAAK,GAAG,EAAG,WAAAL,EAAY,MAAAC,CAAO,EAAEC,CAAW,CAChF,CAAA,CAAC,CACL,MACQ,MAAM,QAAQ/I,EAAIiJ,CAAK,CAAC,EAC7BjJ,EAAIiJ,CAAK,EAAIjJ,EAAIiJ,CAAK,EAAE,IAAKf,GAASU,EAAcV,EAAM,CAAE,KAAMgB,EAAK,KAAK,GAAG,EAAG,WAAAL,EAAY,MAAAC,CAAK,EAAIC,CAAW,CAAC,EAE9GE,KAASjJ,GACd,OAAOA,EAAIiJ,CAAK,GAAM,UACtBjJ,EAAIiJ,CAAK,IAAM,KACfjJ,EAAIiJ,CAAK,EAAIL,EAAc5I,EAAIiJ,CAAK,EAAG,CAAE,KAAMC,EAAK,KAAK,GAAG,EAAG,WAAAL,EAAY,MAAAC,CAAK,EAAIC,CAAW,EAE1FE,IAAU,KACf,OAAO,KAAKjJ,CAAG,EAAE,OAAO,CAACoJ,EAAKC,KAC1BD,EAAIC,CAAI,EAAIT,EAAc5I,EAAIqJ,CAAI,EAAG,CAAE,KAAMH,EAAK,KAAK,GAAG,EAAG,WAAAL,EAAY,MAAAC,CAAK,EAAIC,CAAW,EACtFK,GACRpJ,CAAG,EAEV,OAAOA,CACX,CACO,SAASsJ,GAAetJ,EAAKtC,EAAiB,CACjD,OAAOA,EAAgB,OAAO,CAAC0L,EAAK,CAAE,MAAAG,EAAO,YAAAR,CAAW,IAAOQ,EAAM,OAAO,CAACC,EAAgBpF,IAASwE,EAAcY,EAAgBpF,EAAM2E,CAAW,EAAGK,CAAG,EAAGpJ,CAAG,CACrK,CCnCO,SAASyJ,GAAkBhL,EAAiB,CAC/C,OAAOD,EAAqCC,CAAe,CAC/D,CCHO,SAASiL,GAA6BhB,EAAK,CAC9C,OAAO,SAASA,CAAG,EAAIA,EAAMA,EAAI,SAAQ,CAC7C,CACO,SAASiB,GAA6BjB,EAAK,CAC9C,OAAIA,IAAQ,MACD,IAEPA,IAAQ,WACD,IAEPA,IAAQ,YACD,KAEJA,CACX","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12]}