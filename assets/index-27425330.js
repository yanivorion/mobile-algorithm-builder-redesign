var Tn=Object.defineProperty;var In=(e,t,n)=>t in e?Tn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var p=(e,t,n)=>(In(e,typeof t!="symbol"?t+"":t,n),n);import{r as nt,t as G,R as We,E as Re,S as mn,w as $e,c as V,a as An,b as B,d as D,e as W,f as J,g as he,h as rt,i as at,j as it,k as te,l as pn}from"./float-15cdf841.js";import{m as hs,n as us,o as Es}from"./float-15cdf841.js";import{_ as fn}from"./index-ee79a7ac.js";const gn=e=>{switch(e){case"get":case"GET":return"GET";case"post":case"POST":return"POST";case"put":case"PUT":return"PUT";case"delete":case"DELETE":return"DELETE";case"patch":case"PATCH":return"PATCH";case"head":case"HEAD":return"HEAD";case"options":case"OPTIONS":return"OPTIONS";default:throw new Error(`Unknown method: ${e}`)}},Rn=e=>t=>async n=>{let r;const a=i=>{if(r=e(n)(i),r.url===void 0)throw new Error("Url was not successfully created for this request, please reach out to support channels for assistance.");const{method:s,url:o,params:c}=r;return{...r,method:gn(s),url:o,data:r.data,params:c}};try{const i=await t.request(a);if(r===void 0)throw new Error("Request options were not created for this request, please reach out to support channels for assistance.");const s=Array.isArray(r.transformResponse)?r.transformResponse:[r.transformResponse];let o=i.data;return s.forEach(c=>{c&&(o=c(i.data,i.headers))}),o}catch(i){throw typeof i=="object"&&i!==null&&"response"in i&&typeof i.response=="object"&&i.response!==null&&"data"in i.response?i.response.data:i}},Nn=e=>e.__isAmbassador?!0:!!e().__isAmbassador,Sn="__metadata",Q="www.wixapis.com",wn="edge.wixapis.com";class Pn extends Error{constructor(n,r){super(n);p(this,"message");p(this,"response");this.message=n,this.response=r}async details(){const n=await this.response.json();return Ln(this.response.status,n==null?void 0:n.message,n==null?void 0:n.details,{requestId:this.response.headers.get("X-Wix-Request-Id"),details:n})}}const Ln=(e,t,n,r)=>({details:{...!(n!=null&&n.validationError)&&{applicationError:{description:t,code:e,data:r}},...n},message:t,requestId:r==null?void 0:r.requestId}),On=e=>e!=null&&e.method&&["post","put","patch"].includes(e.method.toLocaleLowerCase())&&e.body?{"Content-Type":"application/json"}:{},yn=e=>e&&typeof e=="object"&&!Array.isArray(e);function Cn(e){return e.includes(`
`)||e.includes("\r")?e.trim():typeof atob<"u"?atob(e):Buffer.from(e,"base64").toString("utf-8")}const Un=e=>e.__type==="host";function vn(e,t){return e.create(t)}const xn="x-wix-bi-gateway";function st(e,t,n){return{[xn]:Fn({environment:`js-sdk${n?`-${n}`:""}`,"package-name":e.packageName??(t==null?void 0:t.PACKAGE_NAME),"method-fqn":e.methodFqn,entity:e.entityFqdn})}}function Fn(e){return Object.entries(e).filter(([t,n])=>!!n).map(([t,n])=>`${t}=${n}`).join(",")}function Mn(e,t,n,r,a,i,s,o,c){return nt(()=>e({request:async l=>{var m,E,T,C;const h=l({host:(s==null?void 0:s.HTTPHost)||Q});let u=h;u.method==="GET"&&((m=u.fallback)!=null&&m.length)&&(((E=u.params)==null?void 0:E.toString().length)??0)>4e3&&(u=h.fallback[0]);const A=(s==null?void 0:s.HTTPHost)??Q;let y=`https://${c?wn:A}${u.url}`;u.params&&u.params.toString()&&(y+=`?${u.params.toString()}`);try{const S=st(h,t,o),g={method:u.method,...u.data&&{body:JSON.stringify(u.data)},headers:{...S}},w=await n(y,g);if(w.status!==200){let d=null;try{d=await w.json()}catch{}const _=kn(w.status,d==null?void 0:d.message,d==null?void 0:d.details,{requestId:w.headers.get("X-Wix-Request-Id"),details:d}),I=G(_);throw r==null||r.handleError(I,{requestOptions:{url:u.url,method:u.method,entityFqdn:h.entityFqdn,methodFqn:h.methodFqn}}),_}const F=await w.json();return{data:(T=u.migrationOptions)!=null&&T.optInTransformResponse&&u.transformResponse?Array.isArray(u.transformResponse)?u.transformResponse[0](F):u.transformResponse(F):F,headers:w.headers,status:w.status,statusText:w.statusText}}catch(S){throw(C=S.message)!=null&&C.includes("fetch is not defined")&&console.error("Node.js v18+ is required"),S}},fetchWithAuth:n,wixAPIFetch:a,getActiveToken:i}))}class Dn extends Error{constructor(n){super();p(this,"response");p(this,"requestId");this.response=n.response,this.requestId=n.requestId}}const kn=(e,t,n,r)=>new Dn({response:{data:{details:{...!(n!=null&&n.validationError)&&{applicationError:{description:t,code:e,data:r}},...n},message:t},status:e},requestId:r==null?void 0:r.requestId}),Gn=".";function bn(e,t,n){if(e==null)throw new Error("Cannot set value on null or undefined");const r=ot(t);let a=e;for(let i=0;i<r.length;i++){const s=r[i];if(i===r.length-1){a[s]=n;break}const o=r[i+1];!(s in a)||a[s]==null?a[s]=typeof o=="number"?[]:{}:(typeof a[s]!="object"||a[s]===null)&&(a[s]=typeof o=="number"?[]:{}),a=a[s]}return e}function ot(e){return Array.isArray(e)?e:e.split(Gn).map(t=>Vn(t)?Number(t):t)}function Vn(e){return/^\d+$/.test(e)}function Wn(e){const t={};for(const[n,r]of Object.entries(e)){if($n(n))continue;const a=ot(n);bn(t,a,r)}return t}function $n(e){return e==="__proto__"||e==="constructor"||e==="prototype"}class Hn{constructor(t){p(this,"BRACKET_PATTERN",/\[(\d+)\]/g);p(this,"NUMERIC_PATTERN",/^\d+$/);p(this,"ESCAPED_DOT_PATTERN",/\\\./g);p(this,"ESCAPED_LEFT_BRACKET_PATTERN",/\\\[/g);p(this,"ESCAPED_RIGHT_BRACKET_PATTERN",/\\\]/g);p(this,"SPLIT_PATTERN",/\.|\[(\d+)\]/g);p(this,"DOT_BEFORE_BRACKET_PATTERN",/\.\[/g);p(this,"ESCAPED_DOT_PLACEHOLDER","__DOT__");p(this,"ESCAPED_RIGHT_BRACKET_PLACEHOLDER","__RB__");p(this,"ESCAPED_LEFT_BRACKET_PLACEHOLDER","__LB__");p(this,"modifiedFields");p(this,"cleanedModifiedFields");this.modifiedFields=t}replaceEscapedCharacters(t){return t.replace(this.ESCAPED_DOT_PATTERN,this.ESCAPED_DOT_PLACEHOLDER).replace(this.ESCAPED_LEFT_BRACKET_PATTERN,this.ESCAPED_LEFT_BRACKET_PLACEHOLDER).replace(this.ESCAPED_RIGHT_BRACKET_PATTERN,this.ESCAPED_RIGHT_BRACKET_PLACEHOLDER)}restoreEscapedCharacters(t){return t.replace(this.ESCAPED_DOT_PLACEHOLDER,"\\.").replace(this.ESCAPED_RIGHT_BRACKET_PLACEHOLDER,"\\]").replace(this.ESCAPED_LEFT_BRACKET_PLACEHOLDER,"\\[")}unflatten(){return this.cleanedModifiedFields=Object.fromEntries(Object.entries(this.modifiedFields).map(([t,n])=>[this.replaceEscapedCharacters(this.bracketToDotNotation(t)),n])),Wn(this.cleanedModifiedFields)}flatten(t){let n={};for(const r of Object.keys(this.cleanedModifiedFields)){const a=this.splitPath(r),i=this.navigatePath(t,a);n={...n,...i}}return Object.fromEntries(Object.entries(n).map(([r,a])=>[this.restoreEscapedCharacters(r),a]))}splitPath(t){const n=[];let r=0;const a=Array.from(t.matchAll(this.SPLIT_PATTERN));for(const i of a)i.index>r&&n.push(t.substring(r,i.index)),i[1]&&n.push(i[1]),r=i.index+i[0].length;return r<t.length&&n.push(t.substring(r)),n}navigatePath(t,n){let r=t;const a=[],i=c=>{if(!Array.isArray(r))throw new Error(`Expected array at path ${this.buildPathString(a)}, but got ${typeof r}`);a.push(`[${c}]`),r=r[parseInt(c,10)]},s=(c,l)=>{const h=c in We?We[c]:void 0;if(h&&h in l){a.push(h),r=l[h];return}const u=Yn(c);if(u&&u in l){a.push(u),r=l[u];return}throw new Error(`Cannot find key '${c}' or its transformations at path ${this.buildPathString(a)}`)},o=(c,l)=>{a.push(c),r=l[c]};for(const c of n){if(this.NUMERIC_PATTERN.test(c)){i(c);continue}if(r===null||typeof r!="object")throw new Error(`Cannot access property '${c}' on ${typeof r} at path ${this.buildPathString(a)}`);const l=r;if(c in r){o(c,l);continue}s(c,l)}return{[this.buildPathString(a)]:r}}buildPathString(t){return t.join(".").replace(this.DOT_BEFORE_BRACKET_PATTERN,"[")}bracketToDotNotation(t){return t.replace(this.BRACKET_PATTERN,(n,r,a)=>a>0&&t[a-1]==="\\"?n:"."+r)}}function Bn(e,t){const n=e==null?void 0:e.modifiedFields;if(!n)return null;const r=Kn(n);if(!r)return null;const{unflattenedModifiedFields:a,modifiedFieldsManipulator:i}=r;e={...e,modifiedFields:a};const s=t(e),o=s==null?void 0:s.modifiedFields;if(!o)return null;const c=qn(o,i);return c!==null?(s.modifiedFields=c,s):null}function Kn(e){if(typeof e=="object"&&e!==null&&!Array.isArray(e))try{const t=new Hn(e);return{unflattenedModifiedFields:t.unflatten(),modifiedFieldsManipulator:t}}catch{return null}return null}function qn(e,t){if(typeof e=="object"&&e!==null&&!Array.isArray(e))try{return t.flatten(e)}catch{return null}return null}function Yn(e){return e.replace(/[-_\s]+(.)?/g,(t,n)=>n?n.toUpperCase():"").replace(/^./,t=>t.toLowerCase())}function ct(){return{emit(e,...t){for(let n=0,r=this.events[e]||[],a=r.length;n<a;n++)r[n](...t)},events:{},on(e,t){var n;return((n=this.events)[e]||(n[e]=[])).push(t),()=>{var r;this.events[e]=(r=this.events[e])==null?void 0:r.filter(a=>t!==a)}}}}const Qn=e=>e.__type==="event-definition";function He(e,t,n,r){let a;if(e.isDomainEvent){const c=n,{deletedEvent:l,actionEvent:h,createdEvent:u,updatedEvent:A,...y}=c,m={...r,...y};l?l!=null&&l.deletedEntity?a={entity:l==null?void 0:l.deletedEntity,metadata:m}:a={metadata:m}:h?a={data:h.body,metadata:m}:A?a={entity:A.currentEntity,metadata:m,...A.modifiedFields?{modifiedFields:A.modifiedFields}:{}}:a={entity:u==null?void 0:u.entity,metadata:m}}else a={data:n,metadata:r};const i=e.transformations??(c=>c);let s=a;const o=a;if(o.modifiedFields){const c=o.modifiedFields;if(typeof c=="object"&&c!==null&&!Array.isArray(c)){s=structuredClone(a);const l=Bn(o,i);if(l)return t(l)}}return t(i(s))}function zn(e){const t=new Map,n=ct(),r={...n,getRegisteredEvents:()=>t,async process(a,i={expectedEvents:[]}){const{eventType:s,identity:o,instanceId:c,payload:l}=await this.parseJWT(a),h=[...i.expectedEvents,...Array.from(t.keys()).map(A=>({type:A}))];if(h.length>0&&!h.some(({type:A})=>A===s))throw new Error(`Unexpected event type: ${s}. Expected one of: ${h.map(A=>A.type).join(", ")}`);const u=t.get(s)??[];return await Promise.all(u.map(({eventDefinition:A,handler:y})=>He(A,y,l,{instanceId:c,identity:o}))),{instanceId:c,eventType:s,payload:l,identity:o}},async processRequest(a,i){const s=await a.text();return this.process(s,i)},async parseJWT(a){const i=e();if(!i.decodeJWT)throw new Error("decodeJWT is not supported by the authentication strategy");const{decoded:s,valid:o}=await i.decodeJWT(a);if(!o)throw new Error("JWT is not valid");if(typeof s.data!="string")throw new Error(`Unexpected type of JWT data: expected string, got ${typeof s.data}`);const c=JSON.parse(s.data),l=c.eventType,h=c.instanceId,u=c.identity?JSON.parse(c.identity):void 0,A=JSON.parse(c.data);return{instanceId:h,eventType:l,payload:A,identity:u}},async parseRequest(a){const i=await a.text();return this.parseJWT(i)},async executeHandlers(a){const i=Array.from(t.keys()).map(o=>({type:o}));if(i.length>0&&!i.some(({type:o})=>o===a.eventType))throw new Error(`Unexpected event type: ${a.eventType}. Expected one of: ${i.map(o=>o.type).join(", ")}`);const s=t.get(a.eventType)??[];await Promise.all(s.map(({eventDefinition:o,handler:c})=>He(o,c,a.payload,{instanceId:a.instanceId,identity:a.identity})))},apps:{AppInstalled:Re("AppInstalled")(),AppRemoved:Re("AppRemoved")()}};return{initModule(a){return i=>{const s=t.get(a.type)??[];s.push({eventDefinition:a,handler:i}),t.set(a.type,s),n.emit("registered",a)}},client:r}}const Jn=e=>e.__type==="service-plugin-definition";function Xn(e){const t=new Map,n=ct(),r={...n,getRegisteredServicePlugins:()=>t,async parseJWT(a){const i=e();if(!i.decodeJWT)throw new Error("decodeJWT is not supported by the authentication strategy");const{decoded:s,valid:o}=await i.decodeJWT(a,!0);if(!o)throw new Error("JWT is not valid");if(typeof s.data!="object"||s.data===null||!("metadata"in s.data)||typeof s.data.metadata!="object"||s.data.metadata===null||!("appExtensionType"in s.data.metadata)||typeof s.data.metadata.appExtensionType!="string")throw new Error("Unexpected JWT data: expected object with metadata.appExtensionType string");return s.data},async process(a){const i=await this.parseJWT(a.body);return this.executeHandler(i,a.url)},async parseRequest(a){const i=await a.text();return this.parseJWT(i)},async processRequest(a){const i=a.url,s=await a.text();try{const o=await this.process({url:i,body:s});return Response.json(o)}catch(o){if(o.errorType==="SPI"&&o.applicationCode&&o.httpCode)return Response.json({applicationError:{code:o.applicationCode,data:o.data}},{status:o.httpCode});throw o}},async executeHandler(a,i){const s=a.metadata.appExtensionType.toLowerCase(),o=t.get(s)??[];if(o.length===0)throw new Error(`No service plugin implementations found for component type ${s}`);if(o.length>1)throw new Error(`Multiple service plugin implementations found for component type ${s}. This is currently not supported`);const{implementation:c,servicePluginDefinition:l}=o[0],h=l.methods.find(A=>i.endsWith(A.primaryHttpMappingPath));if(!h)throw new Error("Unexpect request: request url did not match any method: "+i);const u=c[h.name];if(!u)throw new Error(`Got request for service plugin method ${h.name} but no implementation was provided. Available methods: ${Object.keys(c).join(", ")}`);return h.transformations.toREST(await u(h.transformations.fromREST(a)))}};return{initModule(a){return i=>{const s=t.get(a.componentType.toLowerCase())??[];s.push({servicePluginDefinition:a,implementation:i}),t.set(a.componentType.toLowerCase(),s),n.emit("registered",a)}},client:r}}const b="X-Wix-Consistent";function Zn(e){const t=e.headers||{Authorization:""},n={getAuthHeaders:E=>Promise.resolve({headers:{}})},r=e.auth,a=typeof r=="function"?r:()=>r??n,i=()=>a().getAuthHeaders(e.host),s=async(E,T)=>{var w,F,M,d;const C=await i(),S={...(T==null?void 0:T.headers)??{},...C.headers,...(F=(w=e.host)==null?void 0:w.essentials)==null?void 0:F.passThroughHeaders,...t[b]?{[b]:t[b]}:{}},g=(d=(M=e.host)==null?void 0:M.getErrorHandler)==null?void 0:d.call(M);try{if(typeof E=="string"||E instanceof URL){const _=await fetch(E,{...T,headers:S});g==null||g.handleError(_,{requestOptions:{url:E.toString(),method:T==null?void 0:T.method}});const I=me(_);return I&&(t[b]=I),_}else{for(const[R,P]of Object.entries(S))typeof P=="string"&&E.headers.set(R,P);const _=await fetch(E,T);g==null||g.handleError(_,{requestOptions:{url:E.url,method:T==null?void 0:T.method}});const I=me(_);return I&&(t[b]=I),_}}catch(_){throw g==null||g.handleError(_,{requestOptions:{url:typeof E=="string"||E instanceof URL?E.toString():E.url,method:T==null?void 0:T.method}}),_}},{client:o,initModule:c}=Xn(a),{client:l,initModule:h}=zn(a),u=async(E,T)=>{var F,M;const C=await i(),S=On(T),g=await fetch(E,{...T,headers:{...S,...t,...C==null?void 0:C.headers,...T==null?void 0:T.headers,...(M=(F=e.host)==null?void 0:F.essentials)==null?void 0:M.passThroughHeaders,...t[b]?{[b]:t[b]}:{}}}),w=me(g);return w&&(t[b]=w),g},A=(E,T)=>{var C,S,g,w;if(Qn(E))return h(E);if(Jn(E))return c(E);if(Un(E)&&e.host)return vn(E,e.host);if(typeof E=="function"){if("__type"in E&&E.__type===mn)return E;const F=((C=e.host)==null?void 0:C.apiBaseUrl)??Q,M=e.useCDN===void 0?a().shouldUseCDN:e.useCDN;return Mn(nt(()=>Nn(E))?Rn(E):E,T??{},u,(g=(S=e.host)==null?void 0:S.getErrorHandler)==null?void 0:g.call(S),(d,_)=>{const I=new URL(d,`https://${F}`);return I.host=F,I.protocol="https",u(I.toString(),_)},a().getActiveToken,{HTTPHost:F},(w=e.host)==null?void 0:w.name,M)}else return yn(E)?Object.fromEntries(Object.entries(E).map(([F,M])=>[F,A(M,E[Sn])])):E},y=E=>{for(const T in E)t[T]=E[T]};return{...e.modules?A(e.modules):{},get auth(){const E=a(),T=E.getAuthHeaders;return E.getAuthHeaders=T.bind(void 0,e.host),E},setHeaders:y,use:A,enableContext(E,T={elevated:!1}){E==="global"?globalThis.__wix_context__!=null?T.elevated?globalThis.__wix_context__.elevatedClient=this:globalThis.__wix_context__.client=this:T.elevated?globalThis.__wix_context__={elevatedClient:this}:globalThis.__wix_context__={client:this}:T.elevated?$e.elevatedClient=this:$e.client=this},fetch:(E,T)=>{var g;const C=((g=e.host)==null?void 0:g.apiBaseUrl)??Q,S=new URL(E,`https://${C}`);return S.host=C,S.protocol="https",u(S.toString(),T)},fetchWithAuth:s,async graphql(E,T,C={apiVersion:"alpha"}){var M;const S=((M=e==null?void 0:e.host)==null?void 0:M.apiBaseUrl)??Q,g=await u(`https://${S}/graphql/${C.apiVersion}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:E,variables:T})});if(g.status!==200)throw new Pn(`GraphQL request failed with status ${g.status}`,g);const{data:w,errors:F}=await g.json();return{data:w??{},errors:F}},webhooks:l,servicePlugins:o}}function me(e){var t,n;return((t=e.headers)==null?void 0:t.get(b))??((n=e.headers)==null?void 0:n.get(b.toLowerCase()))}const jn="v1",er=2,tr=1920,nr=1920,rr=1e3,ar=1e3,f={SCALE_TO_FILL:"fill",SCALE_TO_FIT:"fit",STRETCH:"stretch",ORIGINAL_SIZE:"original_size",TILE:"tile",TILE_HORIZONTAL:"tile_horizontal",TILE_VERTICAL:"tile_vertical",FIT_AND_TILE:"fit_and_tile",LEGACY_STRIP_TILE:"legacy_strip_tile",LEGACY_STRIP_TILE_HORIZONTAL:"legacy_strip_tile_horizontal",LEGACY_STRIP_TILE_VERTICAL:"legacy_strip_tile_vertical",LEGACY_STRIP_SCALE_TO_FILL:"legacy_strip_fill",LEGACY_STRIP_SCALE_TO_FIT:"legacy_strip_fit",LEGACY_STRIP_FIT_AND_TILE:"legacy_strip_fit_and_tile",LEGACY_STRIP_ORIGINAL_SIZE:"legacy_strip_original_size",LEGACY_ORIGINAL_SIZE:"actual_size",LEGACY_FIT_WIDTH:"fitWidth",LEGACY_FIT_HEIGHT:"fitHeight",LEGACY_FULL:"full",LEGACY_BG_FIT_AND_TILE:"legacy_tile",LEGACY_BG_FIT_AND_TILE_HORIZONTAL:"legacy_tile_horizontal",LEGACY_BG_FIT_AND_TILE_VERTICAL:"legacy_tile_vertical",LEGACY_BG_NORMAL:"legacy_normal"},O={FIT:"fit",FILL:"fill",FILL_FOCAL:"fill_focal",CROP:"crop",LEGACY_CROP:"legacy_crop",LEGACY_FILL:"legacy_fill"},L={CENTER:"center",TOP:"top",TOP_LEFT:"top_left",TOP_RIGHT:"top_right",BOTTOM:"bottom",BOTTOM_LEFT:"bottom_left",BOTTOM_RIGHT:"bottom_right",LEFT:"left",RIGHT:"right"},ir={[L.CENTER]:{x:.5,y:.5},[L.TOP_LEFT]:{x:0,y:0},[L.TOP_RIGHT]:{x:1,y:0},[L.TOP]:{x:.5,y:0},[L.BOTTOM_LEFT]:{x:0,y:1},[L.BOTTOM_RIGHT]:{x:1,y:1},[L.BOTTOM]:{x:.5,y:1},[L.RIGHT]:{x:1,y:.5},[L.LEFT]:{x:0,y:.5}},Ne={center:"c",top:"t",top_left:"tl",top_right:"tr",bottom:"b",bottom_left:"bl",bottom_right:"br",left:"l",right:"r"},Oe={BG:"bg",IMG:"img",SVG:"svg"},Ae={AUTO:"auto",CLASSIC:"classic",SUPER:"super"},ye={classic:1,super:2},sr={radius:"0.66",amount:"1.00",threshold:"0.01"},or=5e3,cr=5e3,Be=or*cr,pe=[1.5,2,4],z={HIGH:{size:1400*1400,quality:90,maxUpscale:1},MEDIUM:{size:600*600,quality:85,maxUpscale:1},LOW:{size:400*400,quality:80,maxUpscale:1.2},TINY:{size:0,quality:80,maxUpscale:1.4}},Y={HIGH:"HIGH",MEDIUM:"MEDIUM",LOW:"LOW",TINY:"TINY"},x={CONTRAST:"contrast",BRIGHTNESS:"brightness",SATURATION:"saturation",HUE:"hue",BLUR:"blur"},N={JPG:"jpg",JPEG:"jpeg",JPE:"jpe",PNG:"png",WEBP:"webp",WIX_ICO_MP:"wix_ico_mp",WIX_MP:"wix_mp",GIF:"gif",SVG:"svg",AVIF:"avif",UNRECOGNIZED:"unrecognized"},Ke={AVIF:"AVIF",PAVIF:"PAVIF"};function U(e,...t){return function(...n){const r=n[n.length-1]||{},a=[e[0]];return t.forEach(function(i,s){const o=Number.isInteger(i)?n[i]:r[i];a.push(o,e[s+1])}),a.join("")}}function de(e){return e[e.length-1]}const lt=[N.PNG,N.JPEG,N.JPG,N.JPE,N.WIX_ICO_MP,N.WIX_MP,N.WEBP,N.AVIF],lr=[N.JPEG,N.JPG,N.JPE];function dr(e){return lt.includes(q(e))}function hr(e,t,n){return n&&t&&!mr(t.id)&&Object.values(f).includes(e)}function ur(e,t,n){return!(ue(e)||Ee(e))||!t?!0:n}function Er(e,t,n){return Ce(e)?!!(t||n):!1}function dt(e,t,n,r){if(Ir(e)||!ur(e,t,n))return!1;const a=dr(e),i=Er(e,n,r);return a||i}function _r(e){return lr.includes(q(e))}function Tr(e){return q(e)===N.PNG}function ue(e){return q(e)===N.WEBP}function Ce(e){return q(e)===N.GIF}function Ee(e){return q(e)===N.AVIF}function Ir(e){return/(^https?)|(^data)|(^\/\/)/.test(e)}function mr(e){return!e||!e.trim()||e.toLowerCase()==="none"}function Ar(e){return(e==null?void 0:e.isSEOBot)??!1}const pr=["/","\\","?","<",">","|","â€œ",":",'"'].map(encodeURIComponent),fr=["\\.","\\*"],gr="_";function Rr(e,t){const n=/\/(.*?)$/,r=/\.([^.]*)$/,a=new RegExp(`(${pr.concat(fr).join("|")})`,"g");if(t&&t.length){let o=t;const c=t.match(r);return c&&lt.includes(c[1])&&(o=t.replace(r,"")),encodeURIComponent(o).replace(a,gr)}const i=e.match(n);return(i?i[1]:e).replace(r,"")}function Nr(e){return _r(e)?N.JPG:Tr(e)?N.PNG:ue(e)?N.WEBP:Ce(e)?N.GIF:Ee(e)?N.AVIF:N.UNRECOGNIZED}function q(e){return(/[.]([^.]+)$/.exec(e)&&/[.]([^.]+)$/.exec(e)[1]||"").toLowerCase()}function Sr(e,t,n,r){return Math.min(n/e,r/t)}function wr(e,t,n,r){return Math.max(n/e,r/t)}function Se(e,t,n,r,a){let i;return a===O.FILL?i=wr(e,t,n,r):a===O.FIT?i=Sr(e,t,n,r):i=1,i}function Pr(e,t,n,r,a){let i,s=n,o=r;if(i=Se(e,t,n,r,a),a===O.FIT&&(s=e*i,o=t*i),s&&o&&s*o>Be){const c=Math.sqrt(Be/(s*o));s*=c,o*=c,i=Se(e,t,s,o,a)}return{scaleFactor:i,width:s,height:o}}function ht(e,t,n,r,a,i){e=e||r.width,t=t||r.height;const{scaleFactor:s,width:o,height:c}=Pr(e,t,r.width*a,r.height*a,n);return Dr(e,t,o,c,i,s,n)}function Lr(e=L.CENTER){return ir[e]}function Or(e,t,n,r){const a=ut(n)||Lr(r),i=Math.max(0,Math.min(e.width-t.width,a.x*e.width-t.width/2)),s=Math.max(0,Math.min(e.height-t.height,a.y*e.height-t.height/2));return{x:i,y:s,width:Math.min(e.width,t.width),height:Math.min(e.height,t.height)}}function yr(e,t){const n=Math.max(0,Math.min(e.width,t.x+t.width)-Math.max(0,t.x)),r=Math.max(0,Math.min(e.height,t.y+t.height)-Math.max(0,t.y));return n&&r&&(e.width!==n||e.height!==r)?{x:Math.max(0,t.x),y:Math.max(0,t.y),width:n,height:r}:null}function Cr(e){return Math.min(e.pixelAspectRatio||1,er)}function Ue(e){return e.alignment&&Ne[e.alignment]||Ne[L.CENTER]}function ut(e){let t;return e&&typeof e.x=="number"&&!isNaN(e.x)&&typeof e.y=="number"&&!isNaN(e.y)&&(t={x:j(Math.max(0,Math.min(100,e.x))/100,2),y:j(Math.max(0,Math.min(100,e.y))/100,2)}),t}function Ur(e,t){return z[ve(e,t)].quality}function vr(e,t){const n=ve(e,t);return{optimizedScaleFactor:z[n].maxUpscale,upscaleMethodValue:ye.classic,forceUSM:!1}}function xr(e,t){const n=ve(e,t);return{optimizedScaleFactor:z[n].maxUpscale,upscaleMethodValue:ye.classic,forceUSM:!1}}function Fr(e){return{optimizedScaleFactor:de(pe),upscaleMethodValue:ye.super,forceUSM:!(pe.includes(e)||e>de(pe))}}function Mr(e,t,n,r){return r==="auto"?xr(e,t):r==="super"?Fr(n):vr(e,t)}function Dr(e,t,n,r,a,i,s){const{optimizedScaleFactor:o,upscaleMethodValue:c,forceUSM:l}=Mr(e,t,i,a);let h=n,u=r;if(i<=o)return{width:h,height:u,scaleFactor:i,upscaleMethodValue:c,forceUSM:l,cssUpscaleNeeded:!1};switch(s){case O.FILL:h=n*(o/i),u=r*(o/i);break;case O.FIT:h=e*o,u=t*o;break}return{width:h,height:u,scaleFactor:o,upscaleMethodValue:c,forceUSM:l,cssUpscaleNeeded:!0}}function ve(e,t){const n=e*t;return n>z[Y.HIGH].size?Y.HIGH:n>z[Y.MEDIUM].size?Y.MEDIUM:n>z[Y.LOW].size?Y.LOW:Y.TINY}function j(e,t){const n=Math.pow(10,t||0);return(e*n/n).toFixed(t)}function kr(e){return!e||!e.upscaleMethod?Ae.AUTO:Ae[e.upscaleMethod.toUpperCase()]||Ae.AUTO}function Gr(e,t){const n=ue(e)||Ee(e);return q(e)===N.GIF||n&&t}const Et={isMobile:!1},br=function(e){return Et[e]},Vr=function(e,t){Et[e]=t};function _t(){if(typeof window<"u"&&typeof navigator<"u"){const e=window.matchMedia&&window.matchMedia("(max-width: 767px)").matches,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);Vr("isMobile",e&&t)}}function Wr(){return br("isMobile")}function $r(e,t,n){let r;switch(t.crop&&(r=yr(t,t.crop),r&&(e.src.width=r.width,e.src.height=r.height,e.src.isCropped=!0,e.parts.push(qe(r)))),e.fittingType){case f.SCALE_TO_FIT:case f.LEGACY_FIT_WIDTH:case f.LEGACY_FIT_HEIGHT:case f.LEGACY_FULL:case f.FIT_AND_TILE:case f.LEGACY_BG_FIT_AND_TILE:case f.LEGACY_BG_FIT_AND_TILE_HORIZONTAL:case f.LEGACY_BG_FIT_AND_TILE_VERTICAL:case f.LEGACY_BG_NORMAL:e.parts.push(Tt(e,n));break;case f.SCALE_TO_FILL:e.parts.push(Hr(e,n));break;case f.STRETCH:e.parts.push(Br(e,n));break;case f.TILE_HORIZONTAL:case f.TILE_VERTICAL:case f.TILE:case f.LEGACY_ORIGINAL_SIZE:case f.ORIGINAL_SIZE:r=Or(e.src,n,e.focalPoint,n.alignment),e.src.isCropped?(Object.assign(e.parts[0],r),e.src.width=r.width,e.src.height=r.height):e.parts.push(qe(r));break;case f.LEGACY_STRIP_TILE_HORIZONTAL:case f.LEGACY_STRIP_TILE_VERTICAL:case f.LEGACY_STRIP_TILE:case f.LEGACY_STRIP_ORIGINAL_SIZE:e.parts.push(Yr(n));break;case f.LEGACY_STRIP_SCALE_TO_FIT:case f.LEGACY_STRIP_FIT_AND_TILE:e.parts.push(Kr(n));break;case f.LEGACY_STRIP_SCALE_TO_FILL:e.parts.push(qr(n));break}}function Tt(e,t){const n=ht(e.src.width,e.src.height,O.FIT,t,e.devicePixelRatio,e.upscaleMethod);return{transformType:!e.src.width||!e.src.height?O.FIT:O.FILL,width:Math.round(n.width),height:Math.round(n.height),alignment:Ne.center,upscale:n.scaleFactor>1,forceUSM:n.forceUSM,scaleFactor:n.scaleFactor,cssUpscaleNeeded:n.cssUpscaleNeeded,upscaleMethodValue:n.upscaleMethodValue}}function Hr(e,t){const n=ht(e.src.width,e.src.height,O.FILL,t,e.devicePixelRatio,e.upscaleMethod),r=ut(e.focalPoint);return{transformType:r?O.FILL_FOCAL:O.FILL,width:Math.round(n.width),height:Math.round(n.height),alignment:Ue(t),focalPointX:r&&r.x,focalPointY:r&&r.y,upscale:n.scaleFactor>1,forceUSM:n.forceUSM,scaleFactor:n.scaleFactor,cssUpscaleNeeded:n.cssUpscaleNeeded,upscaleMethodValue:n.upscaleMethodValue}}function Br(e,t){const n=Se(e.src.width,e.src.height,t.width,t.height,O.FILL),r={...t};return r.width=e.src.width*n,r.height=e.src.height*n,Tt(e,r)}function qe(e){return{transformType:O.CROP,x:Math.round(e.x),y:Math.round(e.y),width:Math.round(e.width),height:Math.round(e.height),upscale:!1,forceUSM:!1,scaleFactor:1,cssUpscaleNeeded:!1}}function Kr(e){return{transformType:O.FIT,width:Math.round(e.width),height:Math.round(e.height),upscale:!1,forceUSM:!0,scaleFactor:1,cssUpscaleNeeded:!1}}function qr(e){return{transformType:O.LEGACY_FILL,width:Math.round(e.width),height:Math.round(e.height),alignment:Ue(e),upscale:!1,forceUSM:!0,scaleFactor:1,cssUpscaleNeeded:!1}}function Yr(e){return{transformType:O.LEGACY_CROP,width:Math.round(e.width),height:Math.round(e.height),alignment:Ue(e),upscale:!1,forceUSM:!1,scaleFactor:1,cssUpscaleNeeded:!1}}function Qr(e,t){t=t||{},e.quality=Xr(e,t),e.progressive=Jr(t),e.watermark=zr(t),e.autoEncode=t.autoEncode??!0,e.encoding=t==null?void 0:t.encoding,e.unsharpMask=jr(e,t),e.filters=Zr(t)}function zr(e){return e.watermark}function Jr(e){return e.progressive!==!1}function Xr(e,t){const n=e.fileType===N.PNG,r=e.fileType===N.JPG,a=e.fileType===N.WEBP,i=e.fileType===N.AVIF;if(r||n||a||i){const o=de(e.parts),c=Ur(o.width,o.height);let l=t.quality&&t.quality>=5&&t.quality<=90?t.quality:c;return l=n?l+5:l,l}return 0}function Zr(e){const t=e.filters||{},n={};return Z(t[x.CONTRAST],-100,100)&&(n[x.CONTRAST]=t[x.CONTRAST]),Z(t[x.BRIGHTNESS],-100,100)&&(n[x.BRIGHTNESS]=t[x.BRIGHTNESS]),Z(t[x.SATURATION],-100,100)&&(n[x.SATURATION]=t[x.SATURATION]),Z(t[x.HUE],-180,180)&&(n[x.HUE]=t[x.HUE]),Z(t[x.BLUR],0,100)&&(n[x.BLUR]=t[x.BLUR]),n}function Z(e,t,n){return typeof e=="number"&&!isNaN(e)&&e!==0&&e>=t&&e<=n}function jr(e,t){var n,r,a;if(ta(t.unsharpMask))return{radius:j((n=t.unsharpMask)==null?void 0:n.radius,2),amount:j((r=t.unsharpMask)==null?void 0:r.amount,2),threshold:j((a=t.unsharpMask)==null?void 0:a.threshold,2)};if(!na(t.unsharpMask)&&ea(e))return sr}function ea(e){const t=de(e.parts);return!(t.scaleFactor>=1)||t.forceUSM||t.transformType===O.FIT}function ta(e){e=e||{};const t=typeof e.radius=="number"&&!isNaN(e.radius)&&e.radius>=.1&&e.radius<=500,n=typeof e.amount=="number"&&!isNaN(e.amount)&&e.amount>=0&&e.amount<=10,r=typeof e.threshold=="number"&&!isNaN(e.threshold)&&e.threshold>=0&&e.threshold<=255;return t&&n&&r}function na(e){return e=e||{},typeof e.radius=="number"&&!isNaN(e.radius)&&e.radius===0&&typeof e.amount=="number"&&!isNaN(e.amount)&&e.amount===0&&typeof e.threshold=="number"&&!isNaN(e.threshold)&&e.threshold===0}function we(e,t,n,r){const a=Ar(r),i=Nr(t.id),s=Rr(t.id,t.name),o=a?1:Cr(n),c=q(t.id),l=c,h=dt(t.id,r==null?void 0:r.hasAnimation,r==null?void 0:r.allowAnimatedTransform,r==null?void 0:r.allowFullGIFTransformation),u={fileName:s,fileExtension:c,fileType:i,fittingType:e,preferredExtension:l,src:{id:t.id,width:t.width,height:t.height,isCropped:!1,isAnimated:Gr(t.id,r==null?void 0:r.hasAnimation)},focalPoint:{x:t.focalPoint&&t.focalPoint.x,y:t.focalPoint&&t.focalPoint.y},parts:[],devicePixelRatio:o,quality:0,upscaleMethod:kr(r),progressive:!0,watermark:"",unsharpMask:{},filters:{},transformed:h,allowFullGIFTransformation:r==null?void 0:r.allowFullGIFTransformation,isPlaceholderFlow:r==null?void 0:r.isPlaceholderFlow};return h&&($r(u,t,n),Qr(u,r)),u}function ra(e,t,n){const r={...n},a=Wr();switch(e){case f.LEGACY_BG_FIT_AND_TILE:case f.LEGACY_BG_FIT_AND_TILE_HORIZONTAL:case f.LEGACY_BG_FIT_AND_TILE_VERTICAL:case f.LEGACY_BG_NORMAL:const i=a?rr:tr,s=a?ar:nr;r.width=Math.min(i,t.width),r.height=Math.min(s,Math.round(r.width/(t.width/t.height))),r.pixelAspectRatio=1}return r}const aa=U`fit/w_${"width"},h_${"height"}`,ia=U`fill/w_${"width"},h_${"height"},al_${"alignment"}`,sa=U`fill/w_${"width"},h_${"height"},fp_${"focalPointX"}_${"focalPointY"}`,oa=U`crop/x_${"x"},y_${"y"},w_${"width"},h_${"height"}`,ca=U`crop/w_${"width"},h_${"height"},al_${"alignment"}`,la=U`fill/w_${"width"},h_${"height"},al_${"alignment"}`,se=U`,lg_${"upscaleMethodValue"}`,da=U`,q_${"quality"}`,Ye=U`,quality_auto`,ha=U`,usm_${"radius"}_${"amount"}_${"threshold"}`,ua=U`,bl`,Ea=U`,wm_${"watermark"}`,_a={[x.CONTRAST]:U`,con_${"contrast"}`,[x.BRIGHTNESS]:U`,br_${"brightness"}`,[x.SATURATION]:U`,sat_${"saturation"}`,[x.HUE]:U`,hue_${"hue"}`,[x.BLUR]:U`,blur_${"blur"}`},Ta=U`,enc_auto`,Ia=U`,enc_avif`,ma=U`,enc_pavif`,Aa=U`,pstr`,pa=U`,anm_-1`;function fa(e){var r;const t=[];e.parts.forEach(a=>{switch(a.transformType){case O.CROP:t.push(oa(a));break;case O.LEGACY_CROP:t.push(ca(a));break;case O.LEGACY_FILL:let i=la(a);a.upscale&&(i+=se(a)),t.push(i);break;case O.FIT:let s=aa(a);a.upscale&&(s+=se(a)),t.push(s);break;case O.FILL:let o=ia(a);a.upscale&&(o+=se(a)),t.push(o);break;case O.FILL_FOCAL:let c=sa(a);a.upscale&&(c+=se(a)),t.push(c);break}});let n=t.join("/");if(e.quality&&(n+=da(e)),e.unsharpMask&&(n+=ha(e.unsharpMask)),e.progressive||(n+=ua(e)),e.watermark&&(n+=Ea(e)),e.filters&&(n+=Object.keys(e.filters).map(a=>_a[a](e.filters)).join("")),e.fileType!==N.GIF&&(e.encoding===Ke.AVIF?(n+=Ia(e),n+=Ye(e)):e.encoding===Ke.PAVIF?(n+=ma(e),n+=Ye(e)):e.autoEncode&&(n+=Ta(e))),(r=e.src)!=null&&r.isAnimated&&e.transformed){const a=Ce(e.src.id),i=e.isPlaceholderFlow===!0,s=e.allowFullGIFTransformation===!0;i?n+=Aa(e):a&&s&&(n+=pa(e))}return`${e.src.id}/${jn}/${n}/${e.fileName}.${e.preferredExtension}`}function ga(e,t,n,r={},a){if(dt(t.id,r==null?void 0:r.hasAnimation,r==null?void 0:r.allowAnimatedTransform,r==null?void 0:r.allowFullGIFTransformation)){if(ue(t.id)||Ee(t.id)){const{alignment:i,...s}=n;t.focalPoint={x:void 0,y:void 0},t==null||delete t.crop,a=we(e,t,s,r)}else a=a||we(e,t,n,r);return fa(a)}return t.id}const Ra={[L.CENTER]:"50% 50%",[L.TOP_LEFT]:"0% 0%",[L.TOP_RIGHT]:"100% 0%",[L.TOP]:"50% 0%",[L.BOTTOM_LEFT]:"0% 100%",[L.BOTTOM_RIGHT]:"100% 100%",[L.BOTTOM]:"50% 100%",[L.RIGHT]:"100% 50%",[L.LEFT]:"0% 50%"};Object.entries(Ra).reduce((e,[t,n])=>(e[n]=t,e),{});function xe(e,t,n,r){if(hr(e,t,n)){const a=ra(e,t,n),i=we(e,t,a,r);return{uri:ga(e,t,a,r||{},i)}}return{uri:""}}const Na="https://static.wixstatic.com/",Sa="https://static.wixstatic.com/media/",wa=/^media\//i,Fe=typeof window<"u"?window.devicePixelRatio:1,Pa=e=>wa.test(e)?`${Na}${e}`:`${Sa}${e}`,Me=(e,t)=>{const n=t&&t.baseHostURL;return n?`${n}${e}`:Pa(e)};function La(e,t,n,r,a,i){const s=xe(f.SCALE_TO_FIT,{id:e,width:t,height:n,name:i&&i.name},{width:r,height:a,htmlTag:Oe.IMG,alignment:L.CENTER,pixelAspectRatio:(i==null?void 0:i.devicePixelRatio)??Fe},i);return Me(s.uri,i)}function Oa(e,t,n,r,a,i){const s=xe(f.SCALE_TO_FILL,{id:e,width:t,height:n,name:i&&i.name,focalPoint:{x:i&&i.focalPoint&&i.focalPoint.x,y:i&&i.focalPoint&&i.focalPoint.y}},{width:r,height:a,htmlTag:Oe.IMG,alignment:L.CENTER,pixelAspectRatio:(i==null?void 0:i.devicePixelRatio)??Fe},i);return Me(s.uri,i)}function ya(e,t,n,r,a,i,s,o,c,l){const h=xe(f.SCALE_TO_FILL,{id:e,width:t,height:n,name:l&&l.name,crop:{x:r,y:a,width:i,height:s}},{width:o,height:c,htmlTag:Oe.IMG,alignment:L.CENTER,pixelAspectRatio:(l==null?void 0:l.devicePixelRatio)??Fe},l);return Me(h.uri,l)}_t();_t();const De={getScaleToFitImageURL:La,getScaleToFillImageURL:Oa,getCropImageURL:ya},It="wix:",Pe="image",Qe="video",ze="audio",Je="document",mt="https://static.wixstatic.com/media/",Ca="https://static.wixstatic.com/shapes/",fe="https://video.wixstatic.com/video/",Ua="https://static.wixstatic.com/mp3/",va="https://d945e594-8657-47e2-9cd9-e9033c3d8da0.usrfiles.com/ugd/";function xa(e,t,n,r){const a=_e(e);return De.getScaleToFillImageURL(a.id,a.height,a.width,t,n,r)}function Fa(e,t,n,r){const a=_e(e);return De.getScaleToFitImageURL(a.id,a.height,a.width,t,n,r)}function Ma(e,t,n,r,a,i,s,o){const c=_e(e);return De.getCropImageURL(c.id,c.height,c.width,t,n,r,a,i,s,o)}function _e(e){return At(e,mt)}function Da(e){return At(e,Ca)}function At(e,t=mt){let n,r,a,i;if(e.startsWith(t))n=e.split(t).pop().split("/")[0],i=e.split("/w_").pop().split(",")[0],a=e.split(",h_").pop().split(",")[0];else{const c=Ie(e,Pe),{hash:l,pathname:h}=new URL(c),u=new URLSearchParams(l.replace("#",""));a=u.get("originHeight"),i=u.get("originWidth"),[n,r]=h.replace(`${Pe}://v1/`,"").split("/")}const s=Te(r),o={id:n,url:`${t}${n}`,height:Number(a),width:Number(i)};return s?{...o,altText:s,filename:s}:o}function ka(e,t){let n,r,a,i,s="";if(e.startsWith(fe))n=e.split(fe).pop().split("/")[0],r=`${n}.jpg`,a="50",i="50";else{const c=Ie(e,Qe),{pathname:l,hash:h}=new URL(c),u=new URLSearchParams(h.replace("#","")),[A,y]=l.replace(`${Qe}://v1/`,"").split("/");n=A,r=u.get("posterUri")||`${n}.jpg`,a=u.get("posterWidth")||"50",i=u.get("posterHeight")||"50",s=Te(y)}const o={id:n,url:`${fe}${n}/${t?`${t}/mp4/file.mp4`:"file"}`,thumbnail:`${It}${Pe}://v1/${r}#originWidth=${a}&originHeight=${i}`};return s?{...o,filename:s}:o}function Ga(e){const t=Ie(e,ze),{pathname:n,hash:r}=new URL(t),[a,i]=n.replace(`${ze}://v1/`,"").split("/"),s=Te(i),o=new URLSearchParams(r.replace("#","")),c={id:a,duration:Number(o.get("duration")||""),url:`${Ua}${a}`};return s?{...c,filename:s}:c}function ba(e){const t=e.replace("v1/ugd","v1"),n=Ie(t,Je),{pathname:r}=new URL(n),[a,i]=r.replace(`${Je}://v1/`,"").split("/"),s=Te(i),o={id:a,url:`${va}${a}`};return s?{...o,filename:s}:o}function Te(e){return e&&decodeURIComponent(e)}function Ie(e,t){const{protocol:n}=new URL(e);return n===`${t}:`?`${It}${e}`:e}var Xe;(function(e){e.MOBILE="360p",e.LOW="480p",e.MID="720p",e.HIGH="1080p"})(Xe||(Xe={}));const ss={getCroppedImageUrl:Ma,getScaledToFillImageUrl:xa,getScaledToFitImageUrl:Fa,getImageUrl:_e,getVideoUrl:ka,getAudioUrl:Ga,getDocumentUrl:ba,getShapeUrl:Da};function Va(e){return he(Object.assign(e,{domainToMappings:{"www._base_domain_":[{srcPath:"/_api/redirects-api",destPath:""}],"www.wixapis.com":[{srcPath:"/_api/redirects-api",destPath:""},{srcPath:"/redirect-session",destPath:""},{srcPath:"/headless/v1/redirect-session",destPath:"/v1/redirect-session"}],"*.dev.wix-code.com":[{srcPath:"/headless/v1/redirect-session",destPath:"/v1/redirect-session"}],_:[{srcPath:"/headless/v1/redirect-session",destPath:"/v1/redirect-session"}]}}))}var Wa="@wix/auto_sdk_redirects_redirects";function $a(e){function t({host:n}){return{entityFqdn:"wix.headless.v1.redirect_session",method:"POST",methodFqn:"wix.headless.v1.RedirectSessionService.CreateRedirectSession",packageName:Wa,migrationOptions:{optInTransformResponse:!0},url:Va({protoPath:"/v1/redirect-session",data:e,host:n}),data:e}}return t}var pt=(e=>(e.UNDEFINED="UNDEFINED",e.OWNER_BUSINESS="OWNER_BUSINESS",e.OWNER_CUSTOM="OWNER_CUSTOM",e.CUSTOM="CUSTOM",e))(pt||{}),ke=(e=>(e.login="login",e.none="none",e))(ke||{}),ft=(e=>(e.ACCOUNT_INFO="ACCOUNT_INFO",e.BOOKINGS="BOOKINGS",e.ORDERS="ORDERS",e.SUBSCRIPTIONS="SUBSCRIPTIONS",e.EVENTS="EVENTS",e))(ft||{}),gt=(e=>(e.UNKNOWN="UNKNOWN",e.SUCCESS="SUCCESS",e.NO_ACTION="NO_ACTION",e.ERROR="ERROR",e))(gt||{}),Rt=(e=>(e.UNKNOWN="UNKNOWN",e.LOGOUT="LOGOUT",e.CHECKOUT="CHECKOUT",e.AUTHORIZE="AUTHORIZE",e))(Rt||{}),Nt=(e=>(e.UNKNOWN="UNKNOWN",e.SUCCESS="SUCCESS",e.ERROR="ERROR",e))(Nt||{}),St=(e=>(e.UNKNOWN="UNKNOWN",e.ANONYMOUS_VISITOR="ANONYMOUS_VISITOR",e.MEMBER="MEMBER",e.WIX_USER="WIX_USER",e.APP="APP",e))(St||{});async function Ha(e){var i,s,o;const{httpClient:t,sideEffects:n}=arguments[1],r=W({bookingsCheckout:e==null?void 0:e.bookingsCheckout,ecomCheckout:e==null?void 0:e.ecomCheckout,eventsCheckout:e==null?void 0:e.eventsCheckout,paidPlansCheckout:e==null?void 0:e.paidPlansCheckout,login:e==null?void 0:e.login,logout:e==null?void 0:e.logout,auth:e==null?void 0:e.auth,storesProduct:e==null?void 0:e.storesProduct,bookingsBook:e==null?void 0:e.bookingsBook,callbacks:e==null?void 0:e.callbacks,preferences:e==null?void 0:e.preferences,origin:e==null?void 0:e.origin}),a=$a(r);(i=n==null?void 0:n.onSiteCall)==null||i.call(n);try{const c=await t.request(a);return(s=n==null?void 0:n.onSuccess)==null||s.call(n,c),B(c.data)}catch(c){const l=G(c,{spreadPathsToArguments:{},explicitPathsToArguments:{bookingsCheckout:"$[0].bookingsCheckout",ecomCheckout:"$[0].ecomCheckout",eventsCheckout:"$[0].eventsCheckout",paidPlansCheckout:"$[0].paidPlansCheckout",login:"$[0].login",logout:"$[0].logout",auth:"$[0].auth",storesProduct:"$[0].storesProduct",bookingsBook:"$[0].bookingsBook",callbacks:"$[0].callbacks",preferences:"$[0].preferences",origin:"$[0].origin"},singleArgumentUnchanged:!1},["options"]);throw(o=n==null?void 0:n.onError)==null||o.call(n,c),l}}function Ba(e){return t=>Ha(t,{httpClient:e})}var Ka=Re("wix.headless.v1.redirect_session_created",!0,e=>B(D(e,[{transformFn:J,paths:[{path:"metadata.eventTime"}]}])))(),wt=V(Ba),qa=An(Ka);const Ya=Object.freeze(Object.defineProperty({__proto__:null,AttachPagesResponseStatus:gt,CallbackType:Rt,LocationType:pt,MembersAccountSection:ft,Prompt:ke,Status:Nt,WebhookIdentityType:St,createRedirectSession:wt,onRedirectSessionCreated:qa},Symbol.toStringTag,{value:"Module"}));function Pt(){return Math.floor(Date.now()/1e3)}function Ze(e){const t=Pt();return e.expiresAt<t}function oe(e,t){const n=Pt();return{value:e,expiresAt:Number(t)+n}}function Qa(e){return Uint8Array.from(atob(e),t=>t.charCodeAt(0))}function Lt(e){return e&&rt({city:e.city,hint:e.hint,subdivision:e.subdivision,country:e.country,postalCode:e.postalCode,formattedAddress:e.formatted,geocode:e.location,addressLine:e.addressLine1,addressLine2:e.addressLine2,streetAddress:e.streetAddress&&{name:e.streetAddress.name,number:e.streetAddress.number,apt:e.streetAddress.apt}})}function ne(e){return e&&rt({formatted:e.formattedAddress,location:e.geocode,addressLine1:e.addressLine,addressLine2:e.addressLine2,streetAddress:e.streetAddress&&{name:e.streetAddress.name,number:e.streetAddress.number,apt:e.streetAddress.apt},hint:e.hint,city:e.city,subdivision:e.subdivision,country:e.country,postalCode:e.postalCode,countryFullname:e.countryFullname,subdivisionFullname:e.subdivisionFullname})}function re(e){return he(Object.assign(e,{domainToMappings:{_:[{srcPath:"/_api/iam/authentication",destPath:""}],"users._base_domain_":[{srcPath:"/iam/wix/google",destPath:"/v1/sso/callback/root/0e6a50f5-b523-4e29-990d-f37fa2ffdd69"},{srcPath:"/authentication",destPath:""},{srcPath:"/_api/iam/authentication/v1/sso/callback",destPath:"/v1/sso/callback"},{srcPath:"/_api/iam/authentication",destPath:""}],"www.wixapis.com":[{srcPath:"/_api/iam/authentication",destPath:""},{srcPath:"/iam/authentication",destPath:""}],"bo._base_domain_":[{srcPath:"/_api/iam/authentication",destPath:""}],"wixbo.ai":[{srcPath:"/_api/iam/authentication",destPath:""}],"wix-bo.com":[{srcPath:"/_api/iam/authentication",destPath:""}],"dev._base_domain_":[{srcPath:"/_api/iam/authentication",destPath:""}],"manage._base_domain_":[{srcPath:"/_api/authentication",destPath:""}],"www._base_domain_":[{srcPath:"/_api/iam/authentication",destPath:""}],"*.dev.wix-code.com":[{srcPath:"/iam/authentication/v2/sign-on",destPath:"/v2/sign-on"},{srcPath:"/iam/authentication/v1/logout",destPath:"/v1/logout"},{srcPath:"/iam/authentication/v2/change-password",destPath:"/v2/change-password"},{srcPath:"/iam/authentication/v2/verify",destPath:"/v2/verify"},{srcPath:"/iam/authentication/v2/login",destPath:"/v2/login"},{srcPath:"/iam/authentication/v2/register",destPath:"/v2/register"},{srcPath:"/iam/authentication/v2",destPath:"/v2"}]}}))}var ae="@wix/auto_sdk_identity_authentication";function za(e){function t({host:n}){const r=D(e,[{transformFn:at,paths:[{path:"profile.customFields.value.numValue"}]},{transformFn:it,paths:[{path:"profile.customFields.value.dateValue"}]}]);return{entityFqdn:"wix.iam.authentication.v1.authentication",method:"POST",methodFqn:"wix.iam.authentication.v1.AuthenticationService.RegisterV2",packageName:ae,migrationOptions:{optInTransformResponse:!0},url:re({protoPath:"/v2/register",data:r,host:n}),data:r,transformResponse:i=>D(i,[{transformFn:J,paths:[{path:"identity.createdDate"},{path:"identity.updatedDate"},{path:"identity.identityProfile.customFields.value.dateValue"},{path:"additionalData.*.dateValue"}]},{transformFn:te,paths:[{path:"identity.identityProfile.customFields.value.numValue"},{path:"additionalData.*.numValue"}]}])}}return t}function Ja(e){function t({host:n}){return{entityFqdn:"wix.iam.authentication.v1.authentication",method:"POST",methodFqn:"wix.iam.authentication.v1.AuthenticationService.LoginV2",packageName:ae,migrationOptions:{optInTransformResponse:!0},url:re({protoPath:"/v2/login",data:e,host:n}),data:e,transformResponse:a=>D(a,[{transformFn:J,paths:[{path:"identity.createdDate"},{path:"identity.updatedDate"},{path:"identity.identityProfile.customFields.value.dateValue"},{path:"additionalData.*.dateValue"}]},{transformFn:te,paths:[{path:"identity.identityProfile.customFields.value.numValue"},{path:"additionalData.*.numValue"}]}])}}return t}function Xa(e){function t({host:n}){return{entityFqdn:"wix.iam.authentication.v1.authentication",method:"POST",methodFqn:"wix.iam.authentication.v1.AuthenticationService.ChangePassword",packageName:ae,migrationOptions:{optInTransformResponse:!0},url:re({protoPath:"/v2/change-password",data:e,host:n}),data:e}}return t}function Za(e){function t({host:n}){const r=D(e,[{transformFn:at,paths:[{path:"profile.customFields.value.numValue"}]},{transformFn:it,paths:[{path:"profile.customFields.value.dateValue"}]}]);return{entityFqdn:"wix.iam.authentication.v1.authentication",method:"POST",methodFqn:"wix.iam.authentication.v1.AuthenticationService.SignOn",packageName:ae,migrationOptions:{optInTransformResponse:!0},url:re({protoPath:"/v2/sign-on",data:r,host:n}),data:r,transformResponse:i=>D(i,[{transformFn:J,paths:[{path:"identity.createdDate"},{path:"identity.updatedDate"},{path:"identity.identityProfile.customFields.value.dateValue"}]},{transformFn:te,paths:[{path:"identity.identityProfile.customFields.value.numValue"}]}])}}return t}function ja(e){function t({host:n}){return{entityFqdn:"wix.iam.authentication.v1.authentication",method:"GET",methodFqn:"wix.iam.authentication.v1.AuthenticationService.Logout",packageName:ae,migrationOptions:{optInTransformResponse:!0},url:re({protoPath:"/v1/logout",data:e,host:n}),params:pn(e),transformResponse:a=>D(a,[{transformFn:Qa,paths:[{path:"body"}]}])}}return t}var Ot=(e=>(e.UNDEFINED="UNDEFINED",e.PUBLIC="PUBLIC",e.PRIVATE="PRIVATE",e))(Ot||{}),yt=(e=>(e.UNTAGGED="UNTAGGED",e.MAIN="MAIN",e.HOME="HOME",e.WORK="WORK",e))(yt||{}),Ct=(e=>(e.UNTAGGED="UNTAGGED",e.MAIN="MAIN",e.HOME="HOME",e.MOBILE="MOBILE",e.WORK="WORK",e.FAX="FAX",e))(Ct||{}),Ut=(e=>(e.UNTAGGED="UNTAGGED",e.HOME="HOME",e.WORK="WORK",e.BILLING="BILLING",e.SHIPPING="SHIPPING",e))(Ut||{}),ee=(e=>(e.UNKNOWN_STATE="UNKNOWN_STATE",e.SUCCESS="SUCCESS",e.REQUIRE_OWNER_APPROVAL="REQUIRE_OWNER_APPROVAL",e.REQUIRE_EMAIL_VERIFICATION="REQUIRE_EMAIL_VERIFICATION",e.STATUS_CHECK="STATUS_CHECK",e))(ee||{}),vt=(e=>(e.UNKNOWN_STATUS="UNKNOWN_STATUS",e.PENDING="PENDING",e.ACTIVE="ACTIVE",e.DELETED="DELETED",e.BLOCKED="BLOCKED",e.OFFLINE="OFFLINE",e))(vt||{}),xt=(e=>(e.UNKNOWN_REASON="UNKNOWN_REASON",e.PENDING_ADMIN_APPROVAL_REQUIRED="PENDING_ADMIN_APPROVAL_REQUIRED",e.PENDING_EMAIL_VERIFICATION_REQUIRED="PENDING_EMAIL_VERIFICATION_REQUIRED",e))(xt||{}),Ft=(e=>(e.UNKNOWN_FACTOR_TYPE="UNKNOWN_FACTOR_TYPE",e.PASSWORD="PASSWORD",e.SMS="SMS",e.CALL="CALL",e.EMAIL="EMAIL",e.TOTP="TOTP",e.PUSH="PUSH",e.WEBAUTHN="WEBAUTHN",e.RECOVERY_CODE="RECOVERY_CODE",e))(Ft||{}),Mt=(e=>(e.INACTIVE="INACTIVE",e.ACTIVE="ACTIVE",e.REQUIRE_REENROLL="REQUIRE_REENROLL",e))(Mt||{}),Dt=(e=>(e.UNKNOWN_FACTOR_STATUS="UNKNOWN_FACTOR_STATUS",e.ENABLED="ENABLED",e.REQUIRE_ACTIVATION="REQUIRE_ACTIVATION",e.REQUIRE_REENROLL="REQUIRE_REENROLL",e.ENABLED_BY_RULE="ENABLED_BY_RULE",e.DISABLED_BY_RULE="DISABLED_BY_RULE",e))(Dt||{}),kt=(e=>(e.UNKNOWN_MFA_REASON="UNKNOWN_MFA_REASON",e.USER_SETTINGS="USER_SETTINGS",e.HIGH_RISK_LOGIN="HIGH_RISK_LOGIN",e))(kt||{}),Gt=(e=>(e.UNKNOWN_TENANT_TYPE="UNKNOWN_TENANT_TYPE",e.ACCOUNT="ACCOUNT",e.SITE="SITE",e))(Gt||{}),bt=(e=>(e.UNKNOWN_DELIVERY_METHOD="UNKNOWN_DELIVERY_METHOD",e.SMS="SMS",e.WHATSAPP="WHATSAPP",e))(bt||{});async function ei(e,t){var s,o,c;const{httpClient:n,sideEffects:r}=arguments[2],a=D(W({loginId:e,password:t==null?void 0:t.password,profile:t==null?void 0:t.profile,captchaTokens:t==null?void 0:t.captchaTokens,clientMetaData:t==null?void 0:t.clientMetaData}),[{transformFn:Lt,paths:[{path:"profile.addresses.address"}]}]),i=za(a);(s=r==null?void 0:r.onSiteCall)==null||s.call(r);try{const l=await n.request(i);return(o=r==null?void 0:r.onSuccess)==null||o.call(r,l),B(D(l.data,[{transformFn:ne,paths:[{path:"identity.identityProfile.addresses.address"}]}]))}catch(l){const h=G(l,{spreadPathsToArguments:{},explicitPathsToArguments:{loginId:"$[0]",password:"$[1].password",profile:"$[1].profile",captchaTokens:"$[1].captchaTokens",clientMetaData:"$[1].clientMetaData"},singleArgumentUnchanged:!1},["loginId","options"]);throw(c=r==null?void 0:r.onError)==null||c.call(r,l),h}}async function ti(e,t){var s,o,c;const{httpClient:n,sideEffects:r}=arguments[2],a=W({loginId:e,password:t==null?void 0:t.password,captchaTokens:t==null?void 0:t.captchaTokens,clientMetaData:t==null?void 0:t.clientMetaData}),i=Ja(a);(s=r==null?void 0:r.onSiteCall)==null||s.call(r);try{const l=await n.request(i);return(o=r==null?void 0:r.onSuccess)==null||o.call(r,l),B(D(l.data,[{transformFn:ne,paths:[{path:"identity.identityProfile.addresses.address"}]}]))}catch(l){const h=G(l,{spreadPathsToArguments:{},explicitPathsToArguments:{loginId:"$[0]",password:"$[1].password",captchaTokens:"$[1].captchaTokens",clientMetaData:"$[1].clientMetaData"},singleArgumentUnchanged:!1},["loginId","options"]);throw(c=r==null?void 0:r.onError)==null||c.call(r,l),h}}async function ni(e){var i,s,o;const{httpClient:t,sideEffects:n}=arguments[1],r=W({newPassword:e}),a=Xa(r);(i=n==null?void 0:n.onSiteCall)==null||i.call(n);try{const c=await t.request(a);(s=n==null?void 0:n.onSuccess)==null||s.call(n,c)}catch(c){const l=G(c,{spreadPathsToArguments:{},explicitPathsToArguments:{newPassword:"$[0]"},singleArgumentUnchanged:!1},["newPassword"]);throw(o=n==null?void 0:n.onError)==null||o.call(n,c),l}}async function ri(e,t){var s,o,c;const{httpClient:n,sideEffects:r}=arguments[2],a=D(W({loginId:e,profile:t==null?void 0:t.profile,verifyEmail:t==null?void 0:t.verifyEmail,mergeExistingContact:t==null?void 0:t.mergeExistingContact}),[{transformFn:Lt,paths:[{path:"profile.addresses.address"}]}]),i=Za(a);(s=r==null?void 0:r.onSiteCall)==null||s.call(r);try{const l=await n.request(i);return(o=r==null?void 0:r.onSuccess)==null||o.call(r,l),B(D(l.data,[{transformFn:ne,paths:[{path:"identity.identityProfile.addresses.address"}]}]))}catch(l){const h=G(l,{spreadPathsToArguments:{},explicitPathsToArguments:{loginId:"$[0]",profile:"$[1].profile",verifyEmail:"$[1].verifyEmail",mergeExistingContact:"$[1].mergeExistingContact"},singleArgumentUnchanged:!1},["loginId","options"]);throw(c=r==null?void 0:r.onError)==null||c.call(r,l),h}}async function ai(e){var i,s,o;const{httpClient:t,sideEffects:n}=arguments[1],r=W({postLogoutRedirectUri:e==null?void 0:e.postLogoutRedirectUri,clientId:e==null?void 0:e.clientId}),a=ja(r);(i=n==null?void 0:n.onSiteCall)==null||i.call(n);try{const c=await t.request(a);return(s=n==null?void 0:n.onSuccess)==null||s.call(n,c),B(c.data)}catch(c){const l=G(c,{spreadPathsToArguments:{},explicitPathsToArguments:{postLogoutRedirectUri:"$[0].postLogoutRedirectUri",clientId:"$[0].clientId"},singleArgumentUnchanged:!1},["options"]);throw(o=n==null?void 0:n.onError)==null||o.call(n,c),l}}function ii(e){return(t,n)=>ei(t,n,{httpClient:e})}function si(e){return(t,n)=>ti(t,n,{httpClient:e})}function oi(e){return t=>ni(t,{httpClient:e})}function ci(e){return(t,n)=>ri(t,n,{httpClient:e})}function li(e){return t=>ai(t,{httpClient:e})}var di=V(ii),hi=V(si),ui=V(oi),Ei=V(ci),_i=V(li);const Ti=Object.freeze(Object.defineProperty({__proto__:null,AddressTag:Ut,DeliveryMethod:bt,EmailTag:yt,FactorStatus:Dt,FactorType:Ft,MfaReason:kt,PhoneTag:Ct,PrivacyStatus:Ot,Reason:xt,StateType:ee,Status:Mt,StatusName:vt,TenantType:Gt,changePassword:ui,loginV2:hi,logout:_i,registerV2:di,signOn:Ei},Symbol.toStringTag,{value:"Module"}));function Ge(e){return he(Object.assign(e,{domainToMappings:{_:[{srcPath:"/_iam/recovery",destPath:""},{srcPath:"/_api/iam/recovery",destPath:""}],"www.wixapis.com":[{srcPath:"/_api/iam/recovery",destPath:""}],"*.dev.wix-code.com":[{srcPath:"/iam/recovery/v1/recover",destPath:"/v1/recover"},{srcPath:"/iam/recovery/v1/send-email",destPath:"/v1/send-email"},{srcPath:"/iam/recovery/v1/activation-email",destPath:"/v1/activation-email"}]}}))}var be="@wix/auto_sdk_identity_recovery";function Ii(e){function t({host:n}){return{entityFqdn:"wix.iam.recovery.v1.recovery",method:"POST",methodFqn:"wix.iam.recovery.v1.RecoveryService.SendRecoveryEmail",packageName:be,migrationOptions:{optInTransformResponse:!0},url:Ge({protoPath:"/v1/send-email",data:e,host:n}),data:e}}return t}function mi(e){function t({host:n}){return{entityFqdn:"wix.iam.recovery.v1.recovery",method:"POST",methodFqn:"wix.iam.recovery.v1.RecoveryService.SendActivationEmail",packageName:be,migrationOptions:{optInTransformResponse:!0},url:Ge({protoPath:"/v1/activation-email",data:e,host:n}),data:e}}return t}function Ai(e){function t({host:n}){return{entityFqdn:"wix.iam.recovery.v1.recovery",method:"POST",methodFqn:"wix.iam.recovery.v1.RecoveryService.Recover",packageName:be,migrationOptions:{optInTransformResponse:!0},url:Ge({protoPath:"/v1/recover",data:e,host:n}),data:e,transformResponse:a=>D(a,[{transformFn:J,paths:[{path:"identity.createdDate"},{path:"identity.updatedDate"},{path:"identity.identityProfile.customFields.value.dateValue"},{path:"additionalData.*.dateValue"}]},{transformFn:te,paths:[{path:"identity.identityProfile.customFields.value.numValue"},{path:"additionalData.*.numValue"}]}])}}return t}var Vt=(e=>(e.UNKNOWN_TENANT_TYPE="UNKNOWN_TENANT_TYPE",e.ACCOUNT="ACCOUNT",e.SITE="SITE",e))(Vt||{}),Wt=(e=>(e.UNKNOWN_STATE="UNKNOWN_STATE",e.SUCCESS="SUCCESS",e.REQUIRE_OWNER_APPROVAL="REQUIRE_OWNER_APPROVAL",e.REQUIRE_EMAIL_VERIFICATION="REQUIRE_EMAIL_VERIFICATION",e.STATUS_CHECK="STATUS_CHECK",e))(Wt||{}),$t=(e=>(e.UNDEFINED="UNDEFINED",e.PUBLIC="PUBLIC",e.PRIVATE="PRIVATE",e))($t||{}),Ht=(e=>(e.UNTAGGED="UNTAGGED",e.MAIN="MAIN",e.HOME="HOME",e.WORK="WORK",e))(Ht||{}),Bt=(e=>(e.UNTAGGED="UNTAGGED",e.MAIN="MAIN",e.HOME="HOME",e.MOBILE="MOBILE",e.WORK="WORK",e.FAX="FAX",e))(Bt||{}),Kt=(e=>(e.UNTAGGED="UNTAGGED",e.HOME="HOME",e.WORK="WORK",e.BILLING="BILLING",e.SHIPPING="SHIPPING",e))(Kt||{}),qt=(e=>(e.UNKNOWN_STATUS="UNKNOWN_STATUS",e.PENDING="PENDING",e.ACTIVE="ACTIVE",e.DELETED="DELETED",e.BLOCKED="BLOCKED",e.OFFLINE="OFFLINE",e))(qt||{}),Yt=(e=>(e.UNKNOWN_REASON="UNKNOWN_REASON",e.PENDING_ADMIN_APPROVAL_REQUIRED="PENDING_ADMIN_APPROVAL_REQUIRED",e.PENDING_EMAIL_VERIFICATION_REQUIRED="PENDING_EMAIL_VERIFICATION_REQUIRED",e))(Yt||{}),Qt=(e=>(e.UNKNOWN_FACTOR_TYPE="UNKNOWN_FACTOR_TYPE",e.PASSWORD="PASSWORD",e.SMS="SMS",e.CALL="CALL",e.EMAIL="EMAIL",e.TOTP="TOTP",e.PUSH="PUSH",e.WEBAUTHN="WEBAUTHN",e.RECOVERY_CODE="RECOVERY_CODE",e))(Qt||{}),zt=(e=>(e.INACTIVE="INACTIVE",e.ACTIVE="ACTIVE",e.REQUIRE_REENROLL="REQUIRE_REENROLL",e))(zt||{}),Jt=(e=>(e.UNKNOWN_FACTOR_STATUS="UNKNOWN_FACTOR_STATUS",e.ENABLED="ENABLED",e.REQUIRE_ACTIVATION="REQUIRE_ACTIVATION",e.REQUIRE_REENROLL="REQUIRE_REENROLL",e.ENABLED_BY_RULE="ENABLED_BY_RULE",e.DISABLED_BY_RULE="DISABLED_BY_RULE",e))(Jt||{}),Xt=(e=>(e.UNKNOWN_MFA_REASON="UNKNOWN_MFA_REASON",e.USER_SETTINGS="USER_SETTINGS",e.HIGH_RISK_LOGIN="HIGH_RISK_LOGIN",e))(Xt||{});async function pi(e,t){var s,o,c;const{httpClient:n,sideEffects:r}=arguments[2],a=W({email:e,language:t==null?void 0:t.language,redirect:t==null?void 0:t.redirect}),i=Ii(a);(s=r==null?void 0:r.onSiteCall)==null||s.call(r);try{const l=await n.request(i);(o=r==null?void 0:r.onSuccess)==null||o.call(r,l)}catch(l){const h=G(l,{spreadPathsToArguments:{},explicitPathsToArguments:{email:"$[0]",language:"$[1].language",redirect:"$[1].redirect"},singleArgumentUnchanged:!1},["email","options"]);throw(c=r==null?void 0:r.onError)==null||c.call(r,l),h}}async function fi(e,t){var s,o,c;const{httpClient:n,sideEffects:r}=arguments[2],a=W({identityId:e,emailOptions:t==null?void 0:t.emailOptions}),i=mi(a);(s=r==null?void 0:r.onSiteCall)==null||s.call(r);try{const l=await n.request(i);(o=r==null?void 0:r.onSuccess)==null||o.call(r,l)}catch(l){const h=G(l,{spreadPathsToArguments:{},explicitPathsToArguments:{identityId:"$[0]",emailOptions:"$[1].emailOptions"},singleArgumentUnchanged:!1},["identityId","options"]);throw(c=r==null?void 0:r.onError)==null||c.call(r,l),h}}async function gi(e,t){var s,o,c;const{httpClient:n,sideEffects:r}=arguments[2],a=W({recoveryToken:e,password:t==null?void 0:t.password}),i=Ai(a);(s=r==null?void 0:r.onSiteCall)==null||s.call(r);try{const l=await n.request(i);return(o=r==null?void 0:r.onSuccess)==null||o.call(r,l),B(D(l.data,[{transformFn:ne,paths:[{path:"identity.identityProfile.addresses.address"}]}]))}catch(l){const h=G(l,{spreadPathsToArguments:{},explicitPathsToArguments:{recoveryToken:"$[0]",password:"$[1].password"},singleArgumentUnchanged:!1},["recoveryToken","options"]);throw(c=r==null?void 0:r.onError)==null||c.call(r,l),h}}function Ri(e){return(t,n)=>pi(t,n,{httpClient:e})}function Ni(e){return(t,n)=>fi(t,n,{httpClient:e})}function Si(e){return(t,n)=>gi(t,n,{httpClient:e})}var wi=V(Ri),Pi=V(Ni),Li=V(Si);const Oi=Object.freeze(Object.defineProperty({__proto__:null,AddressTag:Kt,EmailTag:Ht,FactorStatus:Jt,FactorType:Qt,MfaReason:Xt,PhoneTag:Bt,PrivacyStatus:$t,Reason:Yt,StateType:Wt,Status:zt,StatusName:qt,TenantType:Vt,recover:Li,sendActivationEmail:Pi,sendRecoveryEmail:wi},Symbol.toStringTag,{value:"Module"}));function Zt(e){return he(Object.assign(e,{domainToMappings:{"www.wixapis.com":[{srcPath:"/_api/iam/verification",destPath:""}],_:[{srcPath:"/_api/iam/verification",destPath:""}],"www._base_domain_":[{srcPath:"/_api/iam/verification",destPath:""}],"*.dev.wix-code.com":[{srcPath:"/iam/verification/v1/auth/resend",destPath:"/v1/auth/resend"},{srcPath:"/iam/verification/v1/Start",destPath:"/v1/Start"},{srcPath:"/iam/verification/v1/auth/verify",destPath:"/v1/auth/verify"}]}}))}var jt="@wix/auto_sdk_identity_verification";function yi(e){function t({host:n}){return{entityFqdn:"wix.iam.verification.v1.start_response",method:"POST",methodFqn:"wix.iam.verification.v1.VerificationService.Start",packageName:jt,migrationOptions:{optInTransformResponse:!0},url:Zt({protoPath:"/v1/Start",data:e,host:n}),data:e}}return t}function Ci(e){function t({host:n}){return{entityFqdn:"wix.iam.verification.v1.start_response",method:"POST",methodFqn:"wix.iam.verification.v1.VerificationService.VerifyDuringAuthentication",packageName:jt,migrationOptions:{optInTransformResponse:!0},url:Zt({protoPath:"/v1/auth/verify",data:e,host:n}),data:e,transformResponse:a=>D(a,[{transformFn:J,paths:[{path:"identity.createdDate"},{path:"identity.updatedDate"},{path:"identity.identityProfile.customFields.value.dateValue"},{path:"additionalData.*.dateValue"}]},{transformFn:te,paths:[{path:"identity.identityProfile.customFields.value.numValue"},{path:"additionalData.*.numValue"}]}])}}return t}var en=(e=>(e.UNKNOWN_TARGET="UNKNOWN_TARGET",e.EMAIL="EMAIL",e))(en||{}),tn=(e=>(e.UNKNOWN_STATE="UNKNOWN_STATE",e.SUCCESS="SUCCESS",e.REQUIRE_OWNER_APPROVAL="REQUIRE_OWNER_APPROVAL",e.REQUIRE_EMAIL_VERIFICATION="REQUIRE_EMAIL_VERIFICATION",e.STATUS_CHECK="STATUS_CHECK",e))(tn||{}),nn=(e=>(e.UNDEFINED="UNDEFINED",e.PUBLIC="PUBLIC",e.PRIVATE="PRIVATE",e))(nn||{}),rn=(e=>(e.UNTAGGED="UNTAGGED",e.MAIN="MAIN",e.HOME="HOME",e.WORK="WORK",e))(rn||{}),an=(e=>(e.UNTAGGED="UNTAGGED",e.MAIN="MAIN",e.HOME="HOME",e.MOBILE="MOBILE",e.WORK="WORK",e.FAX="FAX",e))(an||{}),sn=(e=>(e.UNTAGGED="UNTAGGED",e.HOME="HOME",e.WORK="WORK",e.BILLING="BILLING",e.SHIPPING="SHIPPING",e))(sn||{}),on=(e=>(e.UNKNOWN_STATUS="UNKNOWN_STATUS",e.PENDING="PENDING",e.ACTIVE="ACTIVE",e.DELETED="DELETED",e.BLOCKED="BLOCKED",e.OFFLINE="OFFLINE",e))(on||{}),cn=(e=>(e.UNKNOWN_REASON="UNKNOWN_REASON",e.PENDING_ADMIN_APPROVAL_REQUIRED="PENDING_ADMIN_APPROVAL_REQUIRED",e.PENDING_EMAIL_VERIFICATION_REQUIRED="PENDING_EMAIL_VERIFICATION_REQUIRED",e))(cn||{}),ln=(e=>(e.UNKNOWN_FACTOR_TYPE="UNKNOWN_FACTOR_TYPE",e.PASSWORD="PASSWORD",e.SMS="SMS",e.CALL="CALL",e.EMAIL="EMAIL",e.TOTP="TOTP",e.PUSH="PUSH",e.WEBAUTHN="WEBAUTHN",e.RECOVERY_CODE="RECOVERY_CODE",e))(ln||{}),dn=(e=>(e.INACTIVE="INACTIVE",e.ACTIVE="ACTIVE",e.REQUIRE_REENROLL="REQUIRE_REENROLL",e))(dn||{}),hn=(e=>(e.UNKNOWN_FACTOR_STATUS="UNKNOWN_FACTOR_STATUS",e.ENABLED="ENABLED",e.REQUIRE_ACTIVATION="REQUIRE_ACTIVATION",e.REQUIRE_REENROLL="REQUIRE_REENROLL",e.ENABLED_BY_RULE="ENABLED_BY_RULE",e.DISABLED_BY_RULE="DISABLED_BY_RULE",e))(hn||{}),un=(e=>(e.UNKNOWN_MFA_REASON="UNKNOWN_MFA_REASON",e.USER_SETTINGS="USER_SETTINGS",e.HIGH_RISK_LOGIN="HIGH_RISK_LOGIN",e))(un||{});async function Ui(e){var i,s,o;const{httpClient:t,sideEffects:n}=arguments[1],r=W({identityId:e==null?void 0:e.identityId,target:e==null?void 0:e.target}),a=yi(r);(i=n==null?void 0:n.onSiteCall)==null||i.call(n);try{const c=await t.request(a);return(s=n==null?void 0:n.onSuccess)==null||s.call(n,c),B(c.data)}catch(c){const l=G(c,{spreadPathsToArguments:{},explicitPathsToArguments:{identityId:"$[0].identityId",target:"$[0].target"},singleArgumentUnchanged:!1},["options"]);throw(o=n==null?void 0:n.onError)==null||o.call(n,c),l}}async function vi(e,t){var s,o,c;const{httpClient:n,sideEffects:r}=arguments[2],a=W({code:e,stateToken:t==null?void 0:t.stateToken}),i=Ci(a);(s=r==null?void 0:r.onSiteCall)==null||s.call(r);try{const l=await n.request(i);return(o=r==null?void 0:r.onSuccess)==null||o.call(r,l),B(D(l.data,[{transformFn:ne,paths:[{path:"identity.identityProfile.addresses.address"}]}]))}catch(l){const h=G(l,{spreadPathsToArguments:{},explicitPathsToArguments:{code:"$[0]",stateToken:"$[1].stateToken"},singleArgumentUnchanged:!1},["code","options"]);throw(c=r==null?void 0:r.onError)==null||c.call(r,l),h}}function xi(e){return t=>Ui(t,{httpClient:e})}function Fi(e){return(t,n)=>vi(t,n,{httpClient:e})}var Mi=V(xi),Di=V(Fi);const ki=Object.freeze(Object.defineProperty({__proto__:null,AddressTag:sn,EmailTag:rn,FactorStatus:hn,FactorType:ln,MfaReason:un,PhoneTag:an,PrivacyStatus:nn,Reason:cn,StateType:tn,Status:dn,StatusName:on,Target:en,start:Mi,verifyDuringAuthentication:Di},Symbol.toStringTag,{value:"Module"}));var k;(function(e){e.SUCCESS="SUCCESS",e.INITIAL="INITIAL",e.FAILURE="FAILURE",e.EMAIL_VERIFICATION_REQUIRED="EMAIL_VERIFICATION_REQUIRED",e.OWNER_APPROVAL_REQUIRED="OWNER_APPROVAL_REQUIRED",e.USER_CAPTCHA_REQUIRED="USER_CAPTCHA_REQUIRED",e.SILENT_CAPTCHA_REQUIRED="SILENT_CAPTCHA_REQUIRED"})(k||(k={}));var K;(function(e){e.NONE="none",e.VISITOR="visitor",e.MEMBER="member"})(K||(K={}));function Gi(e,t,n){e.addEventListener?e.addEventListener(t,n):e.attachEvent("on"+t,n)}function bi(e,t,n){e.removeEventListener?e.removeEventListener(t,n):e.detachEvent("on"+t,n)}function Vi(e){const t=document.createElement("iframe");return t.style.display="none",t.src=e,document.body.appendChild(t)}function Wi(e){let t,n;return new Promise((a,i)=>{t=s=>{!s.data||s.data.state!==e||a(s.data)},Gi(window,"message",t),n=setTimeout(()=>{i(new Error("OAuth flow timed out"))},12e4)}).finally(()=>{clearTimeout(n),bi(window,"message",t)})}const je="-19971",et="-19970",$i="-19995",Hi="-19976",Bi="-19973";/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 * @version 0.11.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2024
 * @license MIT
 */const H=[24,16,8,0],Ki=[-2147483648,8388608,32768,128],ce=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];class qi{constructor(){p(this,"blocks");p(this,"h0");p(this,"h1");p(this,"h2");p(this,"h3");p(this,"h4");p(this,"h5");p(this,"h6");p(this,"h7");p(this,"block");p(this,"start");p(this,"bytes");p(this,"hBytes");p(this,"finalized");p(this,"hashed");p(this,"first");p(this,"lastByteIndex");p(this,"chromeBugWorkAround");this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}update(t){const n=this.blocks,r=t.length;let a,i=0,s;for(;i<r;){for(this.hashed&&(this.hashed=!1,n[0]=this.block,this.block=n[16]=n[1]=n[2]=n[3]=n[4]=n[5]=n[6]=n[7]=n[8]=n[9]=n[10]=n[11]=n[12]=n[13]=n[14]=n[15]=0),s=this.start;i<r&&s<64;++i)a=t.charCodeAt(i),a<128?n[s>>>2]|=a<<H[s++&3]:a<2048?(n[s>>>2]|=(192|a>>>6)<<H[s++&3],n[s>>>2]|=(128|a&63)<<H[s++&3]):a<55296||a>=57344?(n[s>>>2]|=(224|a>>>12)<<H[s++&3],n[s>>>2]|=(128|a>>>6&63)<<H[s++&3],n[s>>>2]|=(128|a&63)<<H[s++&3]):(a=65536+((a&1023)<<10|t.charCodeAt(++i)&1023),n[s>>>2]|=(240|a>>>18)<<H[s++&3],n[s>>>2]|=(128|a>>>12&63)<<H[s++&3],n[s>>>2]|=(128|a>>>6&63)<<H[s++&3],n[s>>>2]|=(128|a&63)<<H[s++&3]);this.lastByteIndex=s,this.bytes+=s-this.start,s>=64?(this.block=n[16],this.start=s-64,this.hash(),this.hashed=!0):this.start=s}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}hash(){const t=this.blocks;let n=this.h0,r=this.h1,a=this.h2,i=this.h3,s=this.h4,o=this.h5,c=this.h6,l=this.h7,h,u,A,y,m,E,T,C,S,g,w;for(h=16;h<64;++h)m=t[h-15],u=(m>>>7|m<<25)^(m>>>18|m<<14)^m>>>3,m=t[h-2],A=(m>>>17|m<<15)^(m>>>19|m<<13)^m>>>10,t[h]=t[h-16]+u+t[h-7]+A<<0;for(w=r&a,h=0;h<64;h+=4)this.first?(C=704751109,m=t[0]-210244248,l=m-1521486534<<0,i=m+143694565<<0,this.first=!1):(u=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),A=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),C=n&r,y=C^n&a^w,T=s&o^~s&c,m=l+A+T+ce[h]+t[h],E=u+y,l=i+m<<0,i=m+E<<0),u=(i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10),A=(l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7),S=i&n,y=S^i&r^C,T=l&s^~l&o,m=c+A+T+ce[h+1]+t[h+1],E=u+y,c=a+m<<0,a=m+E<<0,u=(a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10),A=(c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7),g=a&i,y=g^a&n^S,T=c&l^~c&s,m=o+A+T+ce[h+2]+t[h+2],E=u+y,o=r+m<<0,r=m+E<<0,u=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10),A=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),w=r&a,y=w^r&i^g,T=o&c^~o&l,m=s+A+T+ce[h+3]+t[h+3],E=u+y,s=n+m<<0,n=m+E<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+n<<0,this.h1=this.h1+r<<0,this.h2=this.h2+a<<0,this.h3=this.h3+i<<0,this.h4=this.h4+s<<0,this.h5=this.h5+o<<0,this.h6=this.h6+c<<0,this.h7=this.h7+l<<0}finalize(){if(this.finalized)return;this.finalized=!0;const t=this.blocks,n=this.lastByteIndex;t[16]=this.block,t[n>>>2]|=Ki[n&3],this.block=t[16],n>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}arrayBuffer(){this.finalize();const t=new ArrayBuffer(32),n=new DataView(t);return n.setUint32(0,this.h0),n.setUint32(4,this.h1),n.setUint32(8,this.h2),n.setUint32(12,this.h3),n.setUint32(16,this.h4),n.setUint32(20,this.h5),n.setUint32(24,this.h6),n.setUint32(28,this.h7),t}}function Yi(e){return new qi().update(e).arrayBuffer()}function ge(e){if(e||(e=43),e<43||e>128)throw new Error(`Expected a length between 43 and 128. Received ${e}.`);const t=Qi(e),n=zi(t);return{code_verifier:t,code_challenge:n}}function Qi(e){return Ji(e)}function zi(e){return Xi(Yi(e))}function Ji(e){const t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~";let n="";const r=crypto.getRandomValues(new Uint8Array(e));for(let a=0;a<e;a++){const i=r[a]%t.length;n+=t[i]}return n}function Xi(e){return(typeof Buffer>"u"?btoa(Zi(e)):Buffer.from(e).toString("base64")).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function Zi(e){return String.fromCharCode.apply(null,Array.from(new Uint8Array(e)))}const Le="wixRedirectSessionLastPreWarm";function En(){const e=localStorage.getItem(Le),t=Date.now();if(e){const n=parseInt(e,10),r=7*24*60*60*1e3;if(t-n<r)return!0}return!1}async function ji(e={}){if(!(!e.force&&En())){localStorage.removeItem(Le);try{await es(),localStorage.setItem(Le,Date.now().toString())}catch(t){console.error("Error during redirect session pre-warm:",t)}}}async function es(){var a;const t=(a=(await wt({login:{}})).redirectSession)==null?void 0:a.fullUrl;if(!t)throw new Error("No redirect URL found");const n=document.createElement("iframe");n.style.display="none",n.src=t;const r=new Promise(i=>n.onload=i);return document.body.appendChild(n),r}const ts={redirects:Ya,authentication:Ti,recovery:Oi,verification:ki};function os(e){const t=e.tokens||{accessToken:{value:"",expiresAt:0},refreshToken:{value:"",role:K.NONE}},n=d=>{t.accessToken=d.accessToken,t.refreshToken=d.refreshToken};let r={loginState:k.INITIAL};const a=async()=>{var d;if(!((d=t.accessToken)!=null&&d.value)||Ze(t.accessToken)){const _=await s({refreshToken:t.refreshToken});n(_)}return Promise.resolve({headers:{Authorization:t.accessToken.value}})},i=Zn({modules:ts,auth:{getAuthHeaders:a}}),s=async d=>{var I,R,P;if((I=d==null?void 0:d.accessToken)!=null&&I.value&&((R=d==null?void 0:d.refreshToken)!=null&&R.value)&&!Ze(d.accessToken))return d;if((P=d==null?void 0:d.refreshToken)!=null&&P.value)try{return await o(d.refreshToken)}catch{}const _=await le({clientId:e.clientId,grantType:"anonymous"});return{accessToken:oe(_.access_token,_.expires_in),refreshToken:{value:_.refresh_token,role:K.VISITOR}}},o=async d=>{const _=await le({refreshToken:d.value,grantType:"refresh_token"});return{accessToken:oe(_.access_token,_.expires_in),refreshToken:d}},c=()=>{const d=ge();return{codeChallenge:d.code_challenge,codeVerifier:d.code_verifier,state:ge().code_challenge}},l=(d,_)=>{const I={redirectUri:d},R=c();return{...I,originalUri:_??"",codeChallenge:R.codeChallenge,codeVerifier:R.codeVerifier,state:ge().code_challenge}},h=async(d,_,I,R)=>{const{redirectSession:P}=await i.redirects.createRedirectSession({auth:{authRequest:{redirectUri:d.redirectUri,...d.redirectUri&&{redirectUri:d.redirectUri},clientId:e.clientId,codeChallenge:d.codeChallenge,codeChallengeMethod:"S256",responseMode:_,responseType:"code",scope:"offline_access",state:d.state,...R&&{sessionToken:R}},prompt:ke[I]}});return{authUrl:P.fullUrl,authorizationEndpoint:P.urlDetails.endpoint,sessionToken:P.sessionToken}},u=async(d=l("unused://"),_={prompt:"login"})=>h(d,_.responseMode??"fragment",_.prompt??"login",_.sessionToken),A=(d,_="fragment")=>{const I=new URL(d??window.location.href),R=_==="query"?I.searchParams:new URLSearchParams(I.hash.substring(1)),P=R.get("code"),v=R.get("state"),X=R.get("error"),ie=R.get("error_description");return{code:P,state:v,...X&&{error:X,errorDescription:ie}}},y=async(d,_,I)=>{if(!d||!_)throw new Error("Missing code or _state");if(_!==I.state)throw new Error("Invalid _state");const R=await le({clientId:e.clientId,grantType:"authorization_code",...I.redirectUri&&{redirectUri:I.redirectUri},code:d,codeVerifier:I.codeVerifier});return{accessToken:oe(R.access_token,R.expires_in),refreshToken:{value:R.refresh_token,role:K.MEMBER}}},m=async d=>{const{redirectSession:_}=await i.redirects.createRedirectSession({logout:{clientId:e.clientId},callbacks:{postFlowUrl:d}});return t.accessToken={value:"",expiresAt:0},t.refreshToken={value:"",role:K.NONE},{logoutUrl:_.fullUrl}},E=d=>d.state===ee.SUCCESS?{loginState:k.SUCCESS,data:{sessionToken:d.sessionToken}}:d.state===ee.REQUIRE_OWNER_APPROVAL?{loginState:k.OWNER_APPROVAL_REQUIRED}:d.state===ee.REQUIRE_EMAIL_VERIFICATION?(r={loginState:k.EMAIL_VERIFICATION_REQUIRED,data:{stateToken:d.stateToken}},r):{loginState:k.FAILURE,error:"Unknown _state"};return{generateVisitorTokens:s,renewToken:o,parseFromUrl:A,getAuthUrl:u,getMemberTokens:y,generateOAuthData:l,getAuthHeaders:a,setTokens:n,getTokens:()=>t,loggedIn:()=>t.refreshToken.role===K.MEMBER,logout:m,register:async d=>{var _,I,R,P,v,X,ie;try{const $=await i.authentication.registerV2({email:d.email},{password:d.password,profile:d.profile,...d.captchaTokens&&{captchaTokens:[{Recaptcha:(_=d.captchaTokens)==null?void 0:_.recaptchaToken,InvisibleRecaptcha:(I=d.captchaTokens)==null?void 0:I.invisibleRecaptchaToken}]}});return E($)}catch($){const Ve=(P=(R=$.details.validationError)==null?void 0:R.fieldViolations)==null?void 0:P.find(_n=>_n.data.type==="EMAIL");return Ve?{loginState:k.FAILURE,error:Ve.description,errorCode:"invalidEmail"}:((v=$.details.applicationError)==null?void 0:v.code)===je?{loginState:k.FAILURE,error:$.message,errorCode:"missingCaptchaToken"}:((X=$.details.applicationError)==null?void 0:X.code)===$i?{loginState:k.FAILURE,error:$.message,errorCode:"emailAlreadyExists"}:((ie=$.details.applicationError)==null?void 0:ie.code)===et?{loginState:k.FAILURE,error:$.message,errorCode:"invalidCaptchaToken"}:{loginState:k.FAILURE,error:$.message}}},processVerification:async(d,_)=>{const I=_??r;if(I.loginState===k.EMAIL_VERIFICATION_REQUIRED){const R=d.verificationCode??d.code,P=await i.verification.verifyDuringAuthentication(R,{stateToken:I.data.stateToken});return E(P)}return{loginState:k.FAILURE,error:"Unknown _state"}},login:async d=>{var _,I,R,P;try{const v=await i.authentication.loginV2({email:d.email},{password:d.password,...d.captchaTokens&&{captchaTokens:[{Recaptcha:(_=d.captchaTokens)==null?void 0:_.recaptchaToken,InvisibleRecaptcha:(I=d.captchaTokens)==null?void 0:I.invisibleRecaptchaToken}]}});return E(v)}catch(v){return{loginState:k.FAILURE,error:v.message,errorCode:((R=v.details.applicationError)==null?void 0:R.code)===je?"missingCaptchaToken":((P=v.details.applicationError)==null?void 0:P.code)===et?"invalidCaptchaToken":v.details.applicationError.code===Hi?"invalidPassword":v.details.applicationError.code===Bi?"resetPassword":"invalidEmail"}}},getMemberTokensForDirectLogin:async d=>{const _=c(),{authUrl:I}=await h(_,"web_message","none",d),R=Wi(_.state),P=Vi(I);return R.then(v=>y(v.code,v.state,_)).finally(()=>{var v;document.body.contains(P)&&((v=P.parentElement)==null||v.removeChild(P))})},getMemberTokensForExternalLogin:async(d,_)=>{const I=await le({grant_type:"authorized_client",scope:"offline_access",member_id:d},{Authorization:t.accessToken.value+","+_});return{accessToken:oe(I.access_token,I.expires_in),refreshToken:{value:I.refresh_token,role:K.MEMBER}}},sendPasswordResetEmail:async(d,_)=>{await i.recovery.sendRecoveryEmail(d,{redirect:{url:_,clientId:e.clientId}})},captchaInvisibleSiteKey:"6LdoPaUfAAAAAJphvHoUoOob7mx0KDlXyXlgrx5v",captchaVisibleSiteKey:"6Ld0J8IcAAAAANyrnxzrRlX1xrrdXsOmsepUYosy",sessions:{isSessionSynced:En,syncToWixPages:ji},shouldUseCDN:!0}}const le=async(e,t={})=>{const n=await fetch(`https://${Q}/oauth2/token`,{method:"POST",body:JSON.stringify(e),headers:{...st({entityFqdn:"wix.identity.oauth.v1.refresh_token",methodFqn:"wix.identity.oauth2.v1.Oauth2Ng.Token",packageName:"@wix/sdk"}),"Content-Type":"application/json",...t}});if(n.status!==200){let a;try{a=await n.json()}catch{}throw new Error(`Failed to fetch tokens from OAuth API: ${n.statusText}. request id: ${n.headers.get("x-request-id")}. ${a?`Response: ${JSON.stringify(a)}`:""}`)}return await n.json()};function cs({siteId:e,accountId:t,apiKey:n}){const r={Authorization:n};return e&&(r["wix-site-id"]=e),t&&(r["wix-account-id"]=t),{setSiteId(a){r["wix-site-id"]=a},setAccountId(a){r["wix-account-id"]=a},async getAuthHeaders(){return{headers:r}}}}async function tt(e){const t=await fetch("https://www.wixapis.com/oauth2/token-info",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e})});if(t.status!==200)throw new Error(`Failed to get token info. Unexpected status code from Wix OAuth API: ${t.status}`);return await t.json()}function ns(e){let t="refreshToken"in e?e.refreshToken:void 0,n;return{getInstallUrl({redirectUrl:r,token:a,state:i}){const s=new URLSearchParams;return s.set("redirectUrl",r),s.set("appId",e.appId),i&&s.set("state",i),a&&s.set("token",a),`https://www.wix.com/installer/install?${s.toString()}`},async handleOAuthCallback(r,a){if(!e.appSecret)throw new Error("App secret is required for handling OAuth callback. Make sure to pass it to the AppStrategy");const i=new URLSearchParams(new URL(r).search),s=i.get("state");if(s&&(a!=null&&a.state)&&s!==a.state)throw new Error(`Invalid OAuth callback URL. Expected state to be "${a.state}" but got "${s}"`);const o=i.get("code"),c=i.get("instanceId");if(!o||!c)throw new Error("Invalid OAuth callback URL. Make sure you pass the url including the code and instanceId query params.");const l=await fetch("https://www.wixapis.com/oauth/access",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:o,client_id:e.appId,client_secret:e.appSecret,grant_type:"authorization_code"})});if(l.status!==200)throw new Error(`Failed to exchange authorization code for refresh token. Unexpected status code from Wix OAuth API: ${l.status}, request id: ${l.headers.get("x-wix-request-id")}`);const h=await l.json();return t=h.refresh_token,{instanceId:c,accessToken:h.access_token,refreshToken:h.refresh_token}},async getAuthHeaders(){if(n&&n.expiresAt>Date.now())return{headers:{Authorization:n.token}};if("refreshToken"in e||t){if(!e.appSecret)throw new Error("App secret is required for retrieving app-level access tokens. Make sure to pass it to the AppStrategy");const r=await fetch("https://www.wixapis.com/oauth/access",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh_token:t,client_id:e.appId,client_secret:e.appSecret,grant_type:"refresh_token"})});if(r.status!==200)throw new Error(`Failed to exchange refresh token for access token. Unexpected status code from Wix OAuth API: ${r.status}, request id: ${r.headers.get("x-wix-request-id")}`);const a=await r.json();return t=a.refresh_token,{headers:{Authorization:a.access_token}}}else if("instanceId"in e){if(!e.appSecret)throw new Error("App secret is required for retrieving app-level access tokens. Make sure to pass it to the AppStrategy");const r=await fetch("https://www.wixapis.com/oauth2/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({instance_id:e.instanceId,client_id:e.appId,client_secret:e.appSecret,grant_type:"client_credentials"})});if(r.status!==200)throw new Error(`Failed to exchange instance ID for access token. Unexpected status code from Wix OAuth API: ${r.status}, request id: ${r.headers.get("x-wix-request-id")}`);const a=await r.json();return n={token:a.access_token,expiresAt:Date.now()+a.expires_in*1e3},{headers:{Authorization:a.access_token}}}else if("accessToken"in e&&e.accessToken){const r=await fetch("https://www.wixapis.com/oauth2/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({grant_type:"strip_bound_session",client_secret:e.appSecret,access_token:e.accessToken})});if(r.status!==200)throw new Error(`Failed to get unbound token. Unexpected status code from Wix OAuth API: ${r.status}, request id: ${r.headers.get("x-wix-request-id")}`);const{access_token:a,expires_in:i}=await r.json();return n={token:a,expiresAt:Date.now()+i*1e3},{headers:{Authorization:a}}}else throw new Error("Missing refresh token or instance ID. Either one is needed to get app level access tokens. Make sure to pass one of them to the AppStrategy")},async elevated(){if("accessToken"in e&&e.accessToken){const r=await tt(e.accessToken);if(r.clientId!==e.appId)throw new Error(`Invalid access token. The token is not issued for the app with ID "${e.appId}"`);if(!r.instanceId)throw new Error("Unexpected token info. The token does not contain instance ID");return ns({appId:e.appId,appSecret:e.appSecret,publicKey:e.publicKey,instanceId:r.instanceId})}else throw new Error("Providing an access token is required to perform elevation. Make sure to pass it to the AppStrategy")},async decodeJWT(r,a=!1){if(!e.publicKey)throw new Error("Missing public key. Make sure to pass it to the AppStrategy");const{jwtVerify:i,importSPKI:s}=await fn(()=>import("./index-9664230a.js"),[]),o=await s(Cn(e.publicKey),"RS256");return{decoded:{data:(await i(r,o,a?{issuer:"wix.com",audience:e.appId}:void 0)).payload.data},valid:!0}},async getTokenInfo(){const r=t??("accessToken"in e?e.accessToken:void 0);if(!r)throw new Error("Missing token to get info for. Either pass the token as an argument or provide it when initializing the AppStrategy");return tt(r)},getActiveToken(){return"accessToken"in e?e.accessToken:t}}}export{cs as ApiKeyStrategy,ns as AppStrategy,Q as DEFAULT_API_URL,Re as EventDefinition,k as LoginState,os as OAuthStrategy,mn as SERVICE_PLUGIN_ERROR_TYPE,hs as SORT_CAPABILITIES,us as SORT_DIRECTIONS,Es as ServicePluginDefinition,K as TokenRole,Xe as VideoResolution,b as X_WIX_CONSISTENT_HEADER,Zn as createClient,ct as createNanoEvents,Te as decodeText,ss as media};
//# sourceMappingURL=index-27425330.js.map
